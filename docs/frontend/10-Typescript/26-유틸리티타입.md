# TypeScript 유틸리티 타입

## 유틸리티 타입이란?

- 기존 타입을 기반으로 새로운 타입을 생성 혹은 변환

## 기본 유틸리티 타입

### Partial

- 모든 속성 타입을 undefined도 가지게 변경

```ts
// interface
interface Info {
  name: string;
  age: number;
}

interface MyInfo extends Partial<Info> {}

// type
type Info = {
  name: string;
  age: number;
};

type MyInfo = Partial<Info>;
```

:::note

![image](https://github.com/user-attachments/assets/2fd6e888-d564-48e8-9fbf-cfe8c8199552)

위의 코드에서 MyInfo 타입 위에 마우스를 올리면 출력된 결과이다<br/>
Partial을 적용하여 기존 타입의 모든 속성을 **선택적 속성(?)**으로 변경한 것을 확인할 수 있다<br/>

즉, Partial은 **기존 타입의 속성을 기반으로 선택적 속성으로 변경**하는 유틸리티 타입 중 하나

:::

### Required

- 타입의 모든 선택적 속성을 필수로 변경
- Partial의 반대 기능

```ts
// interface
interface Info {
  name?: string;
  age?: number;
}

interface MyInfo extends Required<Info> {}

// type
type Info = {
  name?: string;
  age?: number;
};

type MyInfo = Required<Info>;
```

:::note

![image](https://github.com/user-attachments/assets/707787f0-808f-4123-aceb-bda84efd48b5)

Required를 적용하여 **기존 타입의 모든 선택적 속성(?)이 필수 속성으로 변경된 것**을 확인<br/>
Partial과 반대의 기능으로 동작<br/>

:::

### Readonly

- 모든 속성을 읽기 속성으로 변경

```ts
// interface
interface Info {
  name?: string;
  age?: number;
}

interface MyInfo extends Readonly<Info> {}

// type
type Info = {
  name?: string;
  age?: number;
};

type MyInfo = Readonly<Info>;
```

:::note

![image](https://github.com/user-attachments/assets/7cbc344d-1d2b-4537-91d3-a9b1582a78c4)

Readonly 유틸리티 타입을 이용하여 Info의 **모든 속성에 대해 readonly를 적용**

:::

### Pick

- 특정 속성만 선택하여 새로운 타입을 생성

```ts
// interface
interface Info {
  name?: string;
  age?: number;
  iq: number;
}

interface MyInfo extends Pick<Info, "name"> {}

// type
type Info = {
  name?: string;
  age?: number;
  iq: number;
};

type MyInfo = Pick<Info, "name">;
```

:::note

![image](https://github.com/user-attachments/assets/fae6f69a-68c4-4995-9a19-b867aecf494f)

Pick 유틸리티 타입을 사용할 경우 `Pick<타입, 타입내 속성(들)>` 형식으로 사용하면 `name`속성만 가진 새로운 타입이 생성된다.<br/>

:::

:::tip

```ts
type MyInfo = Pick<Info, "name" | "iq">;
```

여러 속성을 가져와야 할 경우, `|`을 사용하면 된다.<br/>
그럼 MyInfo의 속성은 `name`과 `iq`를 가질 수 있다.<br/>

:::

### Omit

- 특정 속성을 제외하여 새로운 타입을 생성

```ts
// interface
interface Info {
  name?: string;
  age?: number;
  iq: number;
}

interface MyInfo extends Omit<Info, "name"> {}

// type
type Info = {
  name?: string;
  age?: number;
  iq: number;
};

type MyInfo = Omit<Info, "name">;
```

:::note

![image](https://github.com/user-attachments/assets/4969d69e-3af7-458a-acb3-cc5daa008a7e)

Omit 유틸리티 타입을 사용할 경우 `Omit<타입, 제거할 속성(들)>` 형식으로 사용하면 `name`속성이 제거된 새로운 타입이 생성된다.<br/>

```ts
type MyInfo = Omit<Info, "name" | "iq">;
```

Omit 또한 여러 속성들을 제거할 경우, `|`을 이용하면 된다.<br/>
그럼 MyInfo에 `age`속성만 존재하게 된다.<br/>

:::

### Record

- 키와 값을 특정 타입으로 매핑

```ts
// type
type MyInfo = Record<"name" | "age", string | number>;
```

:::note

![image](https://github.com/user-attachments/assets/a097cbc0-e655-4d36-b8c9-f7f169f415b8)

Record 유틸리티 타입을 사용할 경우 `Record<생성할 속성, 참고할 타입>` 형식으로 사용하면,<br/>
`name`, `age` 속성에 `string` 혹은 `number`의 타입을 가지고 생성된다.<br/>

:::

:::info

```ts
// interface
interface Info {
  name: string;
  age: number;
}

interface MyInfo extends Record<"hello" | "world", Info> {}

// type
type Info = {
  name: string;
  age: number;
};

type MyInfo = Record<"hello" | "world", Info>;
```

![image](https://github.com/user-attachments/assets/9768756b-ccbc-49a7-920a-a22ed8f29ceb)

위와 같이 기존 타입을 이용하여 이용하여 새롭게 매핑이 가능하다.<br/>
이미지를 보면 MyInfo는 `hello`, `world`의 key를 가지며, 각 key들은 Info 타입 객체와 매핑된 것을 확인할 수 있다.<br/>

:::

:::danger

Record는 TypeScript의 **유틸리티 타입으로, 특정 키와 값을 제네릭 기반으로 동적으로 매핑**한다.<br/>
interface는 Record를 **확장(extends)**하여 사용할 수는 있지만, Record 자체를 직접 생성하는 문법으로 사용할 수 없다.<br/>

:::

---

## 조건부 유틸리티 타입

### Exclude

- 유니언 타입에서 특정 타입을 제외한 새로운 타입을 생성할 때 사용

```ts
type Status = "success" | "error" | "loading";

type One = Exclude<Status, "success">;
```

:::note

![image](https://github.com/user-attachments/assets/5169f79c-dda3-4902-bbf7-f6bf8df5c27d)

Exclude는 `Exclude<유니언 타입, 제거하고 싶은 타입>`을 작성하면 `제거하고 싶은 타입`을 제외한 남은 타입을 생성한다.<br/>
여러 타입을 제거하고 싶다면 `|`연산자를 이용하여 제거하면 된다.<br/>

Omit과 똑같은 목적으로 사용하지만, 차이점이 존재한다.<br/>

- `Exclude`: 유니언 타입을 조작하여 특정 타입을 제외
- `Omit`: 객체 타입에서 특정 속성을 제외

즉, Exclude는 interface를 직접적으로 사용할 수 없다.

:::

### Extract

- 유니언 타입에서 특정 타입만 추출하여 새로운 타입을 생성
- Exclude와 반대

```ts
type Status = "success" | "error" | "loading";

type One = Extract<Status, "success">;
```

:::note
![image](https://github.com/user-attachments/assets/96a2877a-554a-41f6-a7b2-d151809a8d99)

Extract는 `Extract<유니언 타입, 추출 타입>`을 작성하면 `추출 타입`에 작성한 타입만 생성된다.<br/>
여러 타입을 추출하고 싶다면 `|`연산자를 이용하여 된다.<br/>

Extract 또한 Exclude와 같은 **유니온 타입에서만 조작이 가능**하다.<br/>
만약, 특정 타입을 추출해야하는 대상이 객체 타입일 경우 **Pick**을 이용하면 된다.<br/>

:::

### NonNullable

- `null`과 `undefined`를 제외한 새로운 타입을 생성하는데 사용

```ts
type Status = "success" | "error" | "loading" | null | undefined;

type One = NonNullable<Status>;
```

:::note
![image](https://github.com/user-attachments/assets/25efcc8f-f96f-4bc7-bb07-5fdea483d051)

NonNullable은 `NonNullable<null,undefined를 제거할 타입>`을 작성하면
null, undefined가 제거된 새로운 타입이 생성된다.<br/>
:::

:::tip

```ts
type Info = {
  name?: string | undefined;
  age: null | number;
};

type MappingInfo = {
  [k in keyof Info]: NonNullable<Info[k]>;
};
```

![image](https://github.com/user-attachments/assets/943c4127-51c4-4a39-832e-4bc4bd66758c)

객체 속성내의 모든 속성에 대해 null, undefined를 제거하려면 **매핑된 타입을 사용**하면 된다.<br/>
하지만, `name`속성을 보면 `undefined`가 제거되지 않은 상태로 MappintInfo타입이 생성된다.<br/>

---

#### 왜 name 속성에 undefined가 남아있는 것처럼 보이는가?

- NonNullable은 타입에서 null과 undefined를 제거하여 **string**타입만 남는다.
- ?(옵셔널 속성)는 속성의 존재 여부를 나타내는 메타 정보로 남아있다.
- 옵셔널 속성(name?)은 내부적으로 컴파일러가 **name: string | undefined**로 처리

- 결론: undefined가 제거된 후에도 옵셔널 속성의 의미를 유지하기 위해 undefined가 포함된 것처럼 보인다.

---

만약 옵셔널 속성도 함께 제거를 하고 싶다면

```ts
type Info = {
  name?: string | undefined;
  age: null | number;
};

type MappingInfo = {
  [k in keyof Info]-?: NonNullable<Info[k]>;
};
```

![image](https://github.com/user-attachments/assets/32ff2e64-79d8-4e48-908f-feb78a8bcaa5)

위와 같이 `-?`를 이용하면 옵셔널 속성이 제거가 된다.<br/>

:::

## 함수 관련 유틸리티 타입

### ReturnType

### Parameters

### ConstructorParameters

### InstanceType

## 기타 유틸리티 타입

### ThisType

### Awaited
