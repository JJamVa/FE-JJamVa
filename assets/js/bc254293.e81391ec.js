"use strict";(self.webpackChunktil=self.webpackChunktil||[]).push([[8450],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>k});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),p=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},m=function(e){var n=p(e.components);return r.createElement(l.Provider,{value:n},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),c=p(t),d=a,k=c["".concat(l,".").concat(d)]||c[d]||u[d]||s;return t?r.createElement(k,o(o({ref:n},m),{},{components:t})):r.createElement(k,o({ref:n},m))}));function k(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,o=new Array(s);o[0]=d;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[c]="string"==typeof e?e:a,o[1]=i;for(var p=2;p<s;p++)o[p]=t[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},3003:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var r=t(7462),a=(t(7294),t(3905));const s={},o="Mock Service Workder(MSW)",i={unversionedId:"frontend/NextJS/MSW",id:"frontend/NextJS/MSW",title:"Mock Service Workder(MSW)",description:"MSW\ub780?",source:"@site/docs/frontend/12-NextJS/10-MSW.md",sourceDirName:"frontend/12-NextJS",slug:"/frontend/NextJS/MSW",permalink:"/FE-TIL-JJamVa/docs/frontend/NextJS/MSW",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/frontend/12-NextJS/10-MSW.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{},sidebar:"frontend",previous:{title:"\ub77c\uc6b0\ud305 \uc2ec\ud654",permalink:"/FE-TIL-JJamVa/docs/frontend/NextJS/\ub77c\uc6b0\ud305 \uc2ec\ud654"},next:{title:"Middleware",permalink:"/FE-TIL-JJamVa/docs/frontend/NextJS/middleware"}},l={},p=[{value:"MSW\ub780?",id:"msw\ub780",level:2},{value:"MSW \uc0ac\uc6a9 \uc774\uc720 \ubc0f \uc7a5\uc810",id:"msw-\uc0ac\uc6a9-\uc774\uc720-\ubc0f-\uc7a5\uc810",level:2},{value:"Next.js + MSW",id:"nextjs--msw",level:2},{value:"MSW \uc124\uce58 \ubc0f \uc124\uc815",id:"msw-\uc124\uce58-\ubc0f-\uc124\uc815",level:3},{value:"MSW \uc2e4\uc2b5 \ucf54\ub4dc",id:"msw-\uc2e4\uc2b5-\ucf54\ub4dc",level:2}],m={toc:p},c="wrapper";function u(e){let{components:n,...t}=e;return(0,a.kt)(c,(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"mock-service-workdermsw"},"Mock Service Workder(MSW)"),(0,a.kt)("h2",{id:"msw\ub780"},"MSW\ub780?"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uac1c\ubc1c \ubc0f \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc5d0\uc11c \ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uc744 \uac00\ub85c\ucc44\uace0 \ubaa8\uc758 \uc751\ub2f5\uc744 \uc81c\uacf5\ud558\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"\uc11c\ube44\uc2a4 \uc6cc\ucee4(Service Worker)"),"\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud074\ub77c\uc774\uc5b8\ud2b8 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uc744 \uac00\ub85c\ucc44\uace0, \uac1c\ubc1c\uc790\uac00 \uc815\uc758\ud55c \ud578\ub4e4\ub7ec\uc5d0 \ub530\ub77c \uc751\ub2f5\uc744 \ubc18\ud658"),(0,a.kt)("li",{parentName:"ul"},"\uc2e4\uc81c \ubc31\uc5d4\ub4dc \uc11c\ubc84\uac00 \uc900\ube44\ub418\uc9c0 \uc54a\uc558\uac70\ub098, \ub124\ud2b8\uc6cc\ud06c \ud658\uacbd\uc5d0 \uc758\uc874\ud558\uc9c0 \uc54a\uace0\ub3c4 \ud504\ub860\ud2b8\uc5d4\ub4dc \uac1c\ubc1c \ubc0f \ud14c\uc2a4\ud2b8\ub97c \uc9c4\ud589\uc774 \uac00\ub2a5")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\uc11c\ube44\uc2a4 \uc6cc\ucee4(Service Worker)\ub780?")),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"\uc6f9 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \ubc31\uadf8\ub77c\uc6b4\ub4dc\uc5d0\uc11c \uc2e4\ud589\ub418\ub294 \uc2a4\ud06c\ub9bd\ud2b8"),(0,a.kt)("li",{parentName:"ul"},"\ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uc744 \uac00\ub85c\ucc44\uace0 \uce90\uc2f1, \ubc31\uadf8\ub77c\uc6b4\ub4dc \ub3d9\uae30\ud654, \ud478\uc2dc \uc54c\ub9bc \ub4f1\uc758 \uae30\ub2a5\uc744 \uc81c\uacf5\ud558\uc5ec \uc624\ud504\ub77c\uc778 \ud658\uacbd\uc5d0\uc11c\ub3c4 \uc6f9 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791"),(0,a.kt)("li",{parentName:"ul"},"\uc6f9 \ud398\uc774\uc9c0\uc640\ub294 \ub3c5\ub9bd\uc801\uc73c\ub85c \uc791\ub3d9\ud558\uba70, \ud398\uc774\uc9c0\uac00 \ub85c\ub4dc\ub418\uac70\ub098 \ub2eb\ud600 \uc788\ub294 \uc0c1\ud0dc\uc5d0\uc11c\ub3c4 \ubc31\uadf8\ub77c\uc6b4\ub4dc\uc5d0\uc11c \uc2e4\ud589")),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\uc11c\ube44\uc2a4 \uc6cc\ucee4\uc758 \ud2b9\uc9d5")),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"\ube44\ub3d9\uae30\uc801"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\uc8fc \uc2a4\ub808\ub4dc\uc640 \ubcc4\ub3c4\uc758 \ub3d9\uc791\uc744 \ud558\uba70, \uc6f9\ud398\uc774\uc9c0 \uc131\ub2a5\uc5d0 \uc601\ud5a5\uc744 \ub07c\uce58\uc9c0 \uc54a\uc74c"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"\ub3c5\ub9bd\uc801"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\uc6f9 \ud398\uc774\uc9c0\uac00 \ub2eb\ud788\uac70\ub098 \uc0c8\ub85c\uace0\uce68\ub418\ub354\ub77c\ub3c4 \ub3c5\ub9bd\uc801\uc774\uae30 \ub54c\ubb38\uc5d0 \uc9c0\uc18d\uc801\uc778 \uc2e4\ud589\uc774 \uac00\ub2a5"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"HTTPS\ud544\uc218"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uc744 \uac00\ub85c\ucc44\ub294 \ub2a5\ub825\uc744 \uc545\uc6a9\ud558\uc9c0 \uc54a\ub3c4\ub85d \ud558\uae30 \uc704\ud574 HTTPS\ub97c \ud1b5\ud574\uc11c\ub9cc \uc2e4\ud589 \uac00\ub2a5"))))),(0,a.kt)("h2",{id:"msw-\uc0ac\uc6a9-\uc774\uc720-\ubc0f-\uc7a5\uc810"},"MSW \uc0ac\uc6a9 \uc774\uc720 \ubc0f \uc7a5\uc810"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\ud504\ub860\ud2b8\uc5d4\ub4dc \uac1c\ubc1c \uc0dd\uc0b0\uc131 \ud5a5\uc0c1"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ubc31\uc5d4\ub4dc API\uac00 \ubbf8\uad6c\ud604 \ub418\uc5b4\uc788\uc744 \uacbd\uc6b0, \ud504\ub860\ud2b8\uc5d4\ub4dc \uac1c\ubc1c\uc744 \uc9c0\uc18d\uc801\uc73c\ub85c \uac00\ub2a5"),(0,a.kt)("li",{parentName:"ul"},"\uc2e4\uc81c \uc11c\ubc84\uc5d0 \uc758\uc874\ud558\uc9c0 \uc54a\uace0 \uc2dc\ub098\ub9ac\uc624 \ud14c\uc2a4\ud2b8 \uac00\ub2a5"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\ud14c\uc2a4\ud2b8\uc758 \uc2e0\ub8b0\uc131 \ubc0f \uc77c\uad00\uc131"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\uc678\ubd80 \ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uc744 \ubc29\uc9c0 \ubc0f \ud14c\uc2a4\ud2b8\uc758 \uc77c\uad00\uc131\uc744 \uc720\uc9c0"),(0,a.kt)("li",{parentName:"ul"},"\uc5ec\ub7ec\uac00\uc9c0 \uc2dc\ub098\ub9ac\uc624\ub97c \ud1b5\ud574 \ud074\ub77c\uc774\uc5b8\ud2b8 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uc608\uc678 \ucc98\ub9ac \ub85c\uc9c1\uc744 \uac80\uc99d"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\uc2e4\uc81c\uc640 \uc720\uc0ac\ud55c \ud658\uacbd \uc81c\uacf5"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ube0c\ub77c\uc6b0\uc800 \ud658\uacbd\uc5d0\uc11c \uc2e4\uc81c \ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uc744 \uac00\ub85c\ucc44\uae30 \ub54c\ubb38\uc5d0 \uc2e4\uc81c \uc694\uccad\uacfc \ub3d9\uc77c\ud55c \uc870\uac74\uc744 \uc81c\uacf5")))),(0,a.kt)("h2",{id:"nextjs--msw"},"Next.js + MSW"),(0,a.kt)("h3",{id:"msw-\uc124\uce58-\ubc0f-\uc124\uc815"},"MSW \uc124\uce58 \ubc0f \uc124\uc815"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ud504\ub85c\uc81d\ud2b8 \ud3f4\ub354\uc5d0\uc11c \ud130\ubbf8\ub110\uc5d0 ",(0,a.kt)("inlineCode",{parentName:"li"},"npm install msw --save-dev"),"\ub97c \uc785\ub825"),(0,a.kt)("li",{parentName:"ul"},"\uc774\ud6c4 ",(0,a.kt)("inlineCode",{parentName:"li"},"npx msw init ./public --save"),"\ub85c \uc11c\ube44\uc2a4 \uc6cc\ucee4\ub97c \ub4f1\ub85d(public\uacbd\ub85c\uc5d0 mockServiceWorker.js\uac00 \uc0dd\uc131)")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"mockServiceWorker.js \ucf54\ub4dc"),(0,a.kt)("div",{markdown:"1"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'const PACKAGE_VERSION = "2.3.0";\nconst INTEGRITY_CHECKSUM = "26357c79639bfa20d64c0efca2a87423";\nconst IS_MOCKED_RESPONSE = Symbol("isMockedResponse");\nconst activeClientIds = new Set();\n\nself.addEventListener("install", function () {\n  self.skipWaiting();\n});\n\nself.addEventListener("activate", function (event) {\n  event.waitUntil(self.clients.claim());\n});\n\nself.addEventListener("message", async function (event) {\n  const clientId = event.source.id;\n\n  if (!clientId || !self.clients) {\n    return;\n  }\n\n  const client = await self.clients.get(clientId);\n\n  if (!client) {\n    return;\n  }\n\n  const allClients = await self.clients.matchAll({\n    type: "window",\n  });\n\n  switch (event.data) {\n    case "KEEPALIVE_REQUEST": {\n      sendToClient(client, {\n        type: "KEEPALIVE_RESPONSE",\n      });\n      break;\n    }\n\n    case "INTEGRITY_CHECK_REQUEST": {\n      sendToClient(client, {\n        type: "INTEGRITY_CHECK_RESPONSE",\n        payload: {\n          packageVersion: PACKAGE_VERSION,\n          checksum: INTEGRITY_CHECKSUM,\n        },\n      });\n      break;\n    }\n\n    case "MOCK_ACTIVATE": {\n      activeClientIds.add(clientId);\n\n      sendToClient(client, {\n        type: "MOCKING_ENABLED",\n        payload: true,\n      });\n      break;\n    }\n\n    case "MOCK_DEACTIVATE": {\n      activeClientIds.delete(clientId);\n      break;\n    }\n\n    case "CLIENT_CLOSED": {\n      activeClientIds.delete(clientId);\n\n      const remainingClients = allClients.filter((client) => {\n        return client.id !== clientId;\n      });\n\n      if (remainingClients.length === 0) {\n        self.registration.unregister();\n      }\n\n      break;\n    }\n  }\n});\n\nself.addEventListener("fetch", function (event) {\n  const { request } = event;\n\n  if (request.mode === "navigate") {\n    return;\n  }\n\n  if (request.cache === "only-if-cached" && request.mode !== "same-origin") {\n    return;\n  }\n\n  if (activeClientIds.size === 0) {\n    return;\n  }\n\n  const requestId = crypto.randomUUID();\n  event.respondWith(handleRequest(event, requestId));\n});\n\nasync function handleRequest(event, requestId) {\n  const client = await resolveMainClient(event);\n  const response = await getResponse(event, client, requestId);\n\n  if (client && activeClientIds.has(client.id)) {\n    (async function () {\n      const responseClone = response.clone();\n\n      sendToClient(\n        client,\n        {\n          type: "RESPONSE",\n          payload: {\n            requestId,\n            isMockedResponse: IS_MOCKED_RESPONSE in response,\n            type: responseClone.type,\n            status: responseClone.status,\n            statusText: responseClone.statusText,\n            body: responseClone.body,\n            headers: Object.fromEntries(responseClone.headers.entries()),\n          },\n        },\n        [responseClone.body]\n      );\n    })();\n  }\n\n  return response;\n}\n\nasync function resolveMainClient(event) {\n  const client = await self.clients.get(event.clientId);\n\n  if (client?.frameType === "top-level") {\n    return client;\n  }\n\n  const allClients = await self.clients.matchAll({\n    type: "window",\n  });\n\n  return allClients\n    .filter((client) => {\n      return client.visibilityState === "visible";\n    })\n    .find((client) => {\n      return activeClientIds.has(client.id);\n    });\n}\n\nasync function getResponse(event, client, requestId) {\n  const { request } = event;\n  const requestClone = request.clone();\n\n  function passthrough() {\n    const headers = Object.fromEntries(requestClone.headers.entries());\n\n    delete headers["x-msw-intention"];\n\n    return fetch(requestClone, { headers });\n  }\n\n  if (!client) {\n    return passthrough();\n  }\n\n  if (!activeClientIds.has(client.id)) {\n    return passthrough();\n  }\n\n  const requestBuffer = await request.arrayBuffer();\n  const clientMessage = await sendToClient(\n    client,\n    {\n      type: "REQUEST",\n      payload: {\n        id: requestId,\n        url: request.url,\n        mode: request.mode,\n        method: request.method,\n        headers: Object.fromEntries(request.headers.entries()),\n        cache: request.cache,\n        credentials: request.credentials,\n        destination: request.destination,\n        integrity: request.integrity,\n        redirect: request.redirect,\n        referrer: request.referrer,\n        referrerPolicy: request.referrerPolicy,\n        body: requestBuffer,\n        keepalive: request.keepalive,\n      },\n    },\n    [requestBuffer]\n  );\n\n  switch (clientMessage.type) {\n    case "MOCK_RESPONSE": {\n      return respondWithMock(clientMessage.data);\n    }\n\n    case "PASSTHROUGH": {\n      return passthrough();\n    }\n  }\n\n  return passthrough();\n}\n\nfunction sendToClient(client, message, transferrables = []) {\n  return new Promise((resolve, reject) => {\n    const channel = new MessageChannel();\n\n    channel.port1.onmessage = (event) => {\n      if (event.data && event.data.error) {\n        return reject(event.data.error);\n      }\n\n      resolve(event.data);\n    };\n\n    client.postMessage(\n      message,\n      [channel.port2].concat(transferrables.filter(Boolean))\n    );\n  });\n}\n\nasync function respondWithMock(response) {\n  if (response.status === 0) {\n    return Response.error();\n  }\n\n  const mockedResponse = new Response(response.body, response);\n\n  Reflect.defineProperty(mockedResponse, IS_MOCKED_RESPONSE, {\n    value: true,\n    enumerable: true,\n  });\n\n  return mockedResponse;\n}\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"\uc704\uc758 \ucf54\ub4dc\ub294 ",(0,a.kt)("inlineCode",{parentName:"p"},"npx msw init ./public --save"),"\ub97c \uc785\ub825 \ud6c4, \uc0dd\uc131\ub41c MSW\uc758 \uc11c\ube44\uc2a4 \uc6cc\ucee4 \uc2a4\ud06c\ub9bd\ud2b8 \ucf54\ub4dc\uc774\ub2e4.",(0,a.kt)("br",null),"\n\uac1c\ubc1c \ubc0f \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc5d0\uc11c \ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uc744 \uac00\ub85c\ucc44\uace0 \ubaa8\uc758 \uc751\ub2f5\uc744 \uc81c\uacf5\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9",(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\uc774\ubca4\ud2b8 \ud578\ub4e4\ub7ec")),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"install"),": \uc11c\ube44\uc2a4 \uc6cc\ucee4\uac00 \uc124\uce58\ub420 \ub54c \uc989\uc2dc \ud65c\uc131\ud654 \ucc98\ub9ac"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"active"),": \uc11c\ube44\uc2a4 \uc6cc\ucee4\uac00 \ud65c\uc131\ud65c \ub420 \ub54c \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \uc989\uc2dc \uc81c\uc5b4"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"message"),": \ud074\ub77c\uc774\uc5b8\ud2b8\ub85c\ubd80\ud130 \uba54\uc138\uc9c0\ub97c \uc218\uc2e0\ud558\uace0 \ucc98\ub9ac, \uba54\uc138\uc9c0\uc758 \uc720\ud615\uc5d0 \ub530\ub77c \ubaa8\ud0b9 (\ube44)\ud65c\uc131\ud654, \ubb34\uacb0\uc131 \uac80\uc0ac\ub97c \ucc98\ub9ac"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"fetch"),": \ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uc744 \uac00\ub85c\ucc44\uace0, \uc870\uac74\uc5d0 \ub530\ub77c \uc694\uccad\uc744 \ubb34\uc2dc\ud558\uac70\ub098 ",(0,a.kt)("inlineCode",{parentName:"li"},"handleRequest"),"\ud568\uc218\ub97c \ud638\ucd9c\ud558\uc5ec \ucc98\ub9ac")),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\ud568\uc218")),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"handleRequest"),":",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\uc694\uccad\uc744 \ucc98\ub9ac, \ud074\ub77c\uc774\uc5b8\ud2b8\uc640 \ud1b5\uc2e0\ud558\uc5ec \uc751\ub2f5\uc744 \uc804\uc1a1."),(0,a.kt)("li",{parentName:"ul"},"\ubaa8\ud0b9\ub41c \uc751\ub2f5\uc744 \uc0dd\uc131\ud558\uac70\ub098 \uc6d0\ubcf8 \uc694\uccad\uc744 \uc804\ub2ec."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\ubc18\ud658\uac12\uc740 Response\uac1d\uccb4")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"resolveMainClient"),":",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\uc694\uccad\uc744 \ubcf4\ub0b8 \uc8fc\uc694 \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \ud655\uc778"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\ubc18\ud658\uac12\uc740 \ud074\ub77c\uc774\uc5b8\ud2b8 \uac1d\uccb4 \ud639\uc740 undefined")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"getResponse"),":",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\uc694\uccad\uc744 \ucc98\ub9ac\ud558\uace0 \ud074\ub77c\uc774\uc5b8\ud2b8\ub85c\ubd80\ud130 \uc751\ub2f5\uc744 \ubc1b\uc544 \ubaa8\ud0b9\ub41c \uc751\ub2f5\uc744 \uc0dd\uc131\ud558\uac70\ub098 \uc6d0\ubcf8 \uc694\uccad\uc744 \uc804\ub2ec"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\ubc18\ud658\uac12\uc740 Response \uac1d\uccb4")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"sendToClient"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ud074\ub77c\uc774\uc5b8\ud2b8\ub85c \uba54\uc138\uc9c0\ub97c \uc804\uc1a1\ud558\uace0 \uc751\ub2f5\uc744 \uae30\ub2e4\ub9b0\ub2e4."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\ubc18\ud658\uac12\uc740 Promise\uac1d\uccb4"),", \uc131\uacf5 \uc2dc \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \uc751\ub2f5 \ub370\uc774\ud130, \uc2e4\ud328 \uc2dc \uc5d0\ub7ec\ub97c \ubc18\ud658"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"respondWithMock"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ubaa8\ud0b9\ub41c \uc751\ub2f5 \ub370\uc774\ud130\ub97c \uae30\ubc18\uc73c\ub85c ",(0,a.kt)("inlineCode",{parentName:"li"},"Response"),"\uac1d\uccb4\ub97c \uc0dd\uc131"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\ubc18\ud658\uac12\uc740 \ubaa8\ud0b9\ub41c Response\uac1d\uccb4")))))))),(0,a.kt)("h2",{id:"msw-\uc2e4\uc2b5-\ucf54\ub4dc"},"MSW \uc2e4\uc2b5 \ucf54\ub4dc"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)app/layout.js"',title:'"(src/)app/layout.js"'},'import "./globals.css";\nimport { MswComponent } from "@/_component/mswComponent";\n\nexport default function RootLayout({ children }) {\n  return (\n    <html lang="en">\n      <body style={{ width: "100vw", height: "100vh" }}>\n        <MswComponent />\n        {children}\n      </body>\n    </html>\n  );\n}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)app/page.js"',title:'"(src/)app/page.js"'},'"use client";\n\nexport default function Home() {\n  const submit = async () => {\n    const data = await fetch("http://www.jjamva.com", {\n      method: "get",\n    }).then((res) => {\n      return res.json();\n    });\n\n    console.log(data);\n  };\n\n  return <button onClick={submit}>MSW \ud14c\uc2a4\ud2b8</button>;\n}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)mocks/handlers.js"',title:'"(src/)mocks/handlers.js"'},'import { http, HttpResponse } from "msw";\n\nexport const handlers = [\n  http.get("http://www.jjamva.com", () => {\n    console.log("test MSW!");\n    return HttpResponse.json({\n      name: "jjamVa",\n      age: 87,\n      message: "MSW \uc131\uacf5!",\n    });\n  }),\n];\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)mocks/index.js"',title:'"(src/)mocks/index.js"'},'const initMockAPI = async () => {\n  if (typeof window === "undefined") {\n    const { server } = await import("@/mocks/server");\n    server.listen();\n  } else {\n    const { worker } = await import("@/mocks/worker");\n    worker.start();\n  }\n};\n\nexport default initMockAPI;\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)mocks/server.js"',title:'"(src/)mocks/server.js"'},'import { setupServer } from "msw/node";\nimport { handlers } from "./handlers";\n\nexport const server = setupServer(...handlers);\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)mocks/worker.js"',title:'"(src/)mocks/worker.js"'},'import { setupWorker } from "msw/browser";\nimport { handlers } from "./handlers";\n\nexport const worker = setupWorker(...handlers);\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)_component/mswComponent.js"',title:'"(src/)_component/mswComponent.js"'},'"use client";\n\nimport initMockAPI from "@/mocks";\nimport { useEffect } from "react";\n\nexport const MswComponent = ({ children }) => {\n  useEffect(() => {\n    async function InitMSW() {\n      if (process.env.NODE_ENV === "development") {\n        await initMockAPI();\n      }\n    }\n    InitMSW();\n  }, []);\n\n  return <>{children}</>;\n};\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre"},"src/\n\u251c\u2500\u2500 _component\n\u2502   \u2514\u2500\u2500 mswComponent.js (MswComponent)\n\u251c\u2500\u2500 app\n\u2502   \u251c\u2500\u2500 layout.js (RootLayout)\n\u2502   \u2514\u2500\u2500 page.js (Home \ud398\uc774\uc9c0)\n\u2514\u2500\u2500 mocks\n    \u251c\u2500\u2500 handlers.js (\ud578\ub4e4\ub7ec \uc815\uc758)\n    \u251c\u2500\u2500 index.js (initMockAPI)\n    \u251c\u2500\u2500 server.js (MSW \uc11c\ubc84 \uc124\uc815)\n    \u2514\u2500\u2500 worker.js (MSW \uc6cc\ucee4 \uc124\uc815)\n\n")),(0,a.kt)("p",{parentName:"admonition"},"\uc704\uc758 \ucf54\ub4dc\ub294 MSW \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\uc774\ub2e4.",(0,a.kt)("br",null),"\n\ud575\uc2ec\uc801\uc778 \ucf54\ub4dc\ub294 ",(0,a.kt)("inlineCode",{parentName:"p"},"mocks"),"\ud3f4\ub354\uc758 \ucf54\ub4dc\uc640 ",(0,a.kt)("inlineCode",{parentName:"p"},"_component"),"\uc758 \ud3f4\ub354\uc774\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("details",null,(0,a.kt)("summary",null,"handlers.js"),(0,a.kt)("div",{markdown:"1"},(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)mocks/handlers.js"',title:'"(src/)mocks/handlers.js"'},'import { http, HttpResponse } from "msw";\n\nexport const handlers = [\n  http.get("http://www.jjamva.com", () => {\n    console.log("test MSW!");\n    return HttpResponse.json({\n      name: "jjamVa",\n      age: 87,\n      message: "MSW \uc131\uacf5!",\n    });\n  }),\n];\n')),(0,a.kt)("p",{parentName:"admonition"},"MSW\uc758 \ud578\ub4e4\ub7ec\ub97c \uc815\uc758\ud558\ub294 \ucf54\ub4dc",(0,a.kt)("br",null),"\nhandlers\ubc30\uc5f4\uc744 \uc815\uc758\ud558\uace0 \ubc30\uc5f4 \ub0b4\uc5d0 \ud2b9\uc815 API\uc694\uccad\uc744 \uac00\ub85c\ucc44\uace0 \ubaa8\uc758 \uc751\ub2f5\uc744 \ubc18\ud658\ud55c\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"http"),"\uac1d\uccb4\ub294 HTTP \uc694\uccad\uc744 \uc815\uc758\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9",(0,a.kt)("br",null),"\nhttp \uac1d\uccb4\uc758 \uba54\uc18c\ub4dc(get,post,put,delete)\ub97c \uc774\uc6a9\ud558\uc5ec \ubaa8\uc758 \ud578\ub4e4\ub7ec\ub97c \uc124\uc815\ud558\ub294\ub370 \uc0ac\uc6a9",(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"HttpResponse"),"\uac1d\uccb4\ub294 \ubaa8\uc758 HTTP \uc751\ub2f5\uc744 \uc0dd\uc131\ud558\ub294\ub370 \uc0ac\uc6a9",(0,a.kt)("br",null),"\nHTTP \uc751\ub2f5 \uc0c1\ud0dc, \ud5e4\ub354, \ubcf8\ubb38\uc744 \uc815\uc758\ud558\uc5ec \ubaa8\uc758 \ud578\ub4e4\ub7ec \ubc18\ud658\uac12\uc73c\ub85c \uc0ac\uc6a9\uc774 \uac00\ub2a5",(0,a.kt)("br",null)))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"server.js\uc640 worker.js"),(0,a.kt)("div",{markdown:"1"},(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)mocks/server.js"',title:'"(src/)mocks/server.js"'},'import { setupServer } from "msw/node";\nimport { handlers } from "./handlers";\n\nexport const server = setupServer(...handlers);\n')),(0,a.kt)("p",{parentName:"admonition"},"Node.js \ud658\uacbd\uc5d0\uc11c MSW \uc11c\ubc84\ub97c \uc124\uc815\ud558\ub294 \ucf54\ub4dc",(0,a.kt)("br",null),"\n\uc8fc\ub85c ",(0,a.kt)("strong",{parentName:"p"},"\uc11c\ubc84\uc0ac\uc774\ub4dc \ub80c\ub354\ub9c1")," \ud639\uc740 ",(0,a.kt)("strong",{parentName:"p"},"\ud14c\uc2a4\ud2b8 \ud658\uacbd"),"\uc5d0\uc11c \uc0ac\uc6a9",(0,a.kt)("br",null),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"setupServer"),"\ud568\uc218\ub97c \ud1b5\ud574 MSW\uc11c\ubc84\ub97c \uc124\uc815",(0,a.kt)("br",null)),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)mocks/worker.js"',title:'"(src/)mocks/worker.js"'},'import { setupWorker } from "msw/browser";\nimport { handlers } from "./handlers";\n\nexport const worker = setupWorker(...handlers);\n')),(0,a.kt)("p",{parentName:"admonition"},"\ube0c\ub77c\uc6b0\uc800 \ud658\uacbd\uc5d0\uc11c MSW \uc6cc\ucee4\ub97c \uc124\uc815\ud558\ub294 \ucf54\ub4dc",(0,a.kt)("br",null),"\n\uc8fc\ub85c ",(0,a.kt)("strong",{parentName:"p"},"\ud074\ub77c\uc774\uc5b8\ud2b8 \uc0ac\uc774\ub4dc")," \uac1c\ubc1c\uc5d0\uc11c \uc0ac\uc6a9",(0,a.kt)("br",null),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"setupWorker"),"\ud568\uc218\ub85c MSW\uc6cc\ucee4\ub97c \uc124\uc815",(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},"server.js\uc640 worker.js\ub294 MSW\ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 handlers.js\uc5d0 \uc815\uc758\ud574\ub193\uc740 \ubaa8\uc758 \ud578\ub4e4\ub7ec\ub4e4\uc744 \uc801\uc6a9\ud55c\ub2e4.",(0,a.kt)("br",null),"\n\uc774\ud6c4 \uac01 \ud658\uacbd(\ud074\ub77c\uc774\uc5b8\ud2b8 \uc0ac\uc774\ub4dc, \uc11c\ubc84 \uc0ac\uc774\ub4dc)\ub97c \ud655\uc778\ud558\uc5ec MSW\ub97c \ub3d9\uc791\uc2dc\ud0a4\uae30 \uc704\ud574 \uc900\ube44\ub97c \ud558\ub294 \ub2e8\uacc4\uc774\ub2e4.",(0,a.kt)("br",null)))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"index.js"),(0,a.kt)("div",{markdown:"1"},(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-js"},'const initMockAPI = async () => {\n  if (typeof window === "undefined") {\n    const { server } = await import("@/mocks/server");\n    server.listen();\n  } else {\n    const { worker } = await import("@/mocks/worker");\n    worker.start();\n  }\n};\n\nexport default initMockAPI;\n')),(0,a.kt)("p",{parentName:"admonition"},"\uc704\uc758 \ucf54\ub4dc\ub294 MSW\ub97c \ucd08\uae30\ud654 \uc5ed\ud560\uc744 \ud558\ub294 \ud568\uc218\uc774\ub2e4.",(0,a.kt)("br",null),"\nif\ubb38\uc744 \ubcf4\uba74 window\uc758 \uc874\uc7ac \uc5ec\ubd80\uc5d0 \ub530\ub77c server \ud639\uc740 worker\ub97c \uc2e4\ud589\uc2dc\ud0a8\ub2e4.",(0,a.kt)("br",null),"\n\uc989, window\uac00 ",(0,a.kt)("strong",{parentName:"p"},"\uc874\uc7ac\ud558\uc9c0 \uc54a\uc744 \uacbd\uc6b0 \uc11c\ubc84 \uc0ac\uc774\ub4dc(Node.js\ud658\uacbd)"),", ",(0,a.kt)("strong",{parentName:"p"},"\uc874\uc7ac\ud560 \uacbd\uc6b0 \ud074\ub77c\uc774\uc5b8\ud2b8 \uc0ac\uc774\ub4dc(\ube0c\ub77c\uc6b0\uc800 \ud658\uacbd)"),"\uc774\ub2e4.",(0,a.kt)("br",null),"\n",(0,a.kt)("strong",{parentName:"p"},"\uc11c\ubc84 \uc0ac\uc774\ub4dc\uc77c \uacbd\uc6b0"),"\uc5d4 server.js\ub97c \ud638\ucd9c\ud558\uc5ec ",(0,a.kt)("strong",{parentName:"p"},"MSW\uc11c\ubc84\ub97c \uc2e4\ud589"),", ",(0,a.kt)("strong",{parentName:"p"},"\ud074\ub77c\uc774\uc5b8\ud2b8 \uc0ac\uc774\ub4dc"),"\uc77c \uacbd\uc6b0 worker.js\ub97c ",(0,a.kt)("strong",{parentName:"p"},"MSW\uc6cc\ucee4\ub97c \uc2e4\ud589"),"\ud55c\ub2e4.",(0,a.kt)("br",null)))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"MSW\uc0ac\uc6a9 \uc601\uc5ed \uc124\uc815(mswComponent.js) \ubc0f \uc0ac\uc6a9"),(0,a.kt)("div",{markdown:"1"},(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)_component/mswComponent.js"',title:'"(src/)_component/mswComponent.js"'},'"use client";\n\nimport initMockAPI from "@/mocks";\nimport { useEffect } from "react";\n\nexport const MswComponent = ({ children }) => {\n  useEffect(() => {\n    async function InitMSW() {\n      if (process.env.NODE_ENV === "development") {\n        await initMockAPI();\n      }\n    }\n    InitMSW();\n  }, []);\n\n  return <>{children}</>;\n};\n')),(0,a.kt)("p",{parentName:"admonition"},"\uc704\uc758 \ucf54\ub4dc\ub294 MSW\ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 \uc601\uc5ed\uc744 \uc124\uc815\ud560 Component\ub97c \uc815\uc758\ud558\ub294 \ucf54\ub4dc",(0,a.kt)("br",null),"\nuseEffect\ub97c \ud1b5\ud574 Mount\uac00 \ub420 \ub54c\ub9c8\ub2e4 MSW\ub97c \ucd08\uae30\ud654\ud55c\ub2e4.",(0,a.kt)("br",null),"\nif\ubb38\uc5d0 ",(0,a.kt)("inlineCode",{parentName:"p"},'process.env.NODE_ENV === "development"'),"\ub294 \uac1c\ubc1c \ud658\uacbd\uc778\uc9c0 \uc5ec\ubd80\ub97c \ud655\uc778\ud558\ub294 \uac83\uc774\ub2e4.",(0,a.kt)("br",null),"\n\uac1c\ubc1c \ud658\uacbd\uc774 \ud655\uc778\ub418\uc5c8\ub2e4\uba74, mocks\ud3f4\ub354\uc5d0\uc11c \uc815\uc758\ud55c index.js\ub97c \uc2e4\ud589\uc2dc\ucf1c MSW\ub97c \ucd08\uae30\ud654 \ud55c\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)app/layout.js"',title:'"(src/)app/layout.js"'},'import "./globals.css";\nimport { MswComponent } from "@/_component/mswComponent";\n\nexport default function RootLayout({ children }) {\n  return (\n    <html lang="en">\n      <body style={{ width: "100vw", height: "100vh" }}>\n        <MswComponent />\n        {children}\n      </body>\n    </html>\n  );\n}\n')),(0,a.kt)("p",{parentName:"admonition"},"MSW\ub97c \uc0ac\uc6a9\ud560 \uc601\uc5ed \uacbd\ub85c\uc758 layout.js\uc5d0 mswComponent\ub97c \ub123\uc73c\uba74 \ub41c\ub2e4.",(0,a.kt)("br",null),"\n\ubaa8\ub4e0 \uc601\uc5ed\uc5d0 \uc0ac\uc6a9\ud560 \uacbd\uc6b0, app\uacbd\ub85c\uc758 layout.js\uc5d0 \ub123\uc73c\uba74 \ub41c\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="(src/)app/page.js"',title:'"(src/)app/page.js"'},'"use client";\n\nexport default function Home() {\n  const submit = async () => {\n    const data = await fetch("http://www.jjamva.com", {\n      method: "get",\n    }).then((res) => {\n      return res.json();\n    });\n\n    console.log(data);\n  };\n\n  return <button onClick={submit}>MSW \ud14c\uc2a4\ud2b8</button>;\n}\n')),(0,a.kt)("p",{parentName:"admonition"},"MSW\uc601\uc5ed \uc124\uc815\uae4c\uc9c0 \uc644\ub8cc\ud558\uc600\ub2e4\uba74, fetch\ub97c \ud1b5\ud574 API \ub370\uc774\ud130\ub97c \uac00\uc838\uc624\ub294 \uac83\ucc98\ub7fc \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("img",{parentName:"p",src:"https://github.com/JJamVa/JJamVa/assets/80045006/4efdfed7-1e72-425c-8dca-73567c39986a",alt:"image"})),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"MSW \ud14c\uc2a4\ud2b8"),"\ubc84\ud2bc\uc744 \ub20c\ub800\uc744 \uacbd\uc6b0, \uc704\uc758 \uc774\ubbf8\uc9c0\uc640 \uac19\uc774 MSW\uac00 \uc798 \uc801\uc6a9\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.",(0,a.kt)("br",null))))))}u.isMDXComponent=!0}}]);