# Next.js 페이지 예외 처리

## 로딩 페이지

### loading 파일

- Next.js에서 `loading.js`(타입스크립트 .tsx)로 만들면 자동으로 로딩 화면이 생성
- 모든 페이지에 동일한 로딩 화면을 표현하고 싶다면 `(src/)app`영역에 `loading.js`를 생성
- 특정 라우터에 로딩 화면을 표현하고 싶다면 해당 경로 폴더에 `loading.js`를 생성

```js title="(src/)app/page.js"
import Link from "next/link";

export default function Home() {
  return (
    <div style={{ display: "flex", flexDirection: "column" }}>
      <h1>Home Page</h1>
      <Link href="/info">Info 페이지로 이동</Link>
      <Link href="/about">About 페이지로 이동</Link>
    </div>
  );
}
```

```js title="(src/)app/loading.js"
export default function Loading() {
  return <>로딩 중...</>;
}
```

```js title="(src/)app/info/page.js"
import Link from "next/link";

export default function InfoPage() {
  return (
    <>
      <div>Info Page</div>
      <Link href="info/myinfo">myInfo 페이지 이동</Link>
    </>
  );
}
```

```js title="(src/)app/info/loading.js"
export default function Loading() {
  return <div>Info 로딩 중...</div>;
}
```

```js title="(src/)app/info/myinfo/page.js"
export default function MyInfo() {
  return <div>MyInfo페이지</div>;
}
```

```js title="(src/)app/about/page.js"
export default function AboutPage() {
  return <div>About Page</div>;
}
```

:::note

위의 코드 구조이다.<br/>

```
src/app
├── page.js (Home 페이지)
├── loading.js (Home 페이지 로딩 화면)
├── info
│   ├── page.js (Info 페이지)
│   ├── loading.js (Info 페이지 로딩 화면)
│   └── myinfo
│       └── page.js (MyInfo 페이지)
└── about
    └── page.js (About 페이지)
```

app의 page.js에서 `Info 페이지로 이동`을 클릭 시, info경로의 page.js가 호출되는 동안 info의 loading.js화면을 표현한다<br/>
info의 page.js에서 `myInfo 페이지 이동`을 클릭하게되면 myinfo경로의 page.js를 호출한다.<br/>
myinfo 폴더에는 loading.js파일이 존재하지 않지만, 상위 폴더인 info에 loading.js파일이 존재한다.<br/>
myinfo 페이지를 불러오게되면 info폴더의 loading.js파일을 호출하게 된다.<br/>
about페이지도 해당 경로에 loading.js파일이 존재하지 않는다.<br/>
about페이지도 상위 폴더를 탐색하여 (src/)app에 존재하는 loading.js파일을 호출하여 로딩화면으로 표현한다.<br/>

즉, loading.js파일을 이용하여 쉽게 로딩 화면이 표현 가능<br/>
또한 해당 경로에 loading.js파일이 존재하지 않는다면 해당 경로 기준 **상단 제일 가까운 경로의 loading.js파일을 호출**한다.<br/>

:::

### Suspense

- React에서 비동기적으로 데이터를 불러오는 동안 로딩 상태를 관리하는 기능
- Next.js에서도 Suspense를 이용하여 로딩 상태 관리가 가능

## 에러 페이지

- 서버 또는 클라이언트가에서 오류가 발생했을 때 사용자에게 보여지는 페이지
- Next.js에서 `error.js`(타입스크립트 tsx)파일을 생성하면 에러 화면을 표현가능

## not found 페이지

- 사용자가 잘못된 경에 접근했을 때, 보여지는 화면
- Next.js에서 `not-found.js`(타입스크립트 tsx)파일을 생성하여 잘못된 경로 진입 시, 보여지는 페이지
