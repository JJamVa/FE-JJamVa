# 라우팅 심화

## Parallel Routes(병렬 라우트)

- 동일한 경로 레벨에서 여러 개의 라우트가 동시에 활성화되고 관리
- 하나의 레이아웃에 여러 라우트가 동시에 렌더링
- 병렬 라우트를 생성 시, 폴더명을 `@폴더명`으로 작성

```js title="(src/)app/page.js"
export default async function Home({ props }) {
  return <div>Home Page입니다.</div>;
}
```

```js title="(src/)app/layout.js"
import "./globals.css";

export default function RootLayout({ children, info, content }) {
  console.log(children);
  return (
    <html lang="en">
      <body style={{ width: "100vw", height: "100vh" }}>
        <div>{children}</div>
        <div>{info}</div>
        <div>{content}</div>
      </body>
    </html>
  );
}
```

```js title="(src/)app/loading.js"
export default function AppLoading() {
  return <>로딩 중...</>;
}
```

```js title="(src/)app/@info/page.js"
export default async function InfoPage() {
  await new Promise((resolve) => setTimeout(resolve, 5000));
  return <div>Info Page 입니다.</div>;
}
```

```js title="(src/)app/@content/page.js"
export default async function ContentPage() {
  await new Promise((resolve) => setTimeout(resolve, 1000));
  return <div>Conetent Page 입니다.</div>;
}
```

:::note

```
src/app
├── page.js (Home 페이지)
├── loading.js (loading 페이지)
├── layout.js (layout 페이지)
├── @info
│      └── page.js (info 페이지)
└── @content
       └── page.js (content 페이지)
```

app경로에 `info`, `content` 라우팅 페이지를 정의해놓은 코드<br/>
`info`와 `content`가 병렬 라우팅인지 확인하기 위해 setTimeout을 통해 각각 렌더링 시간을 걸어두었다.<br/>

병렬 라우팅을 하기 위해서는 동일한 레벨에서 `@폴더명`으로 폴더를 만들고 안에 page.js를 생성해야된다.<br/>
`@`뒤에 붙은 폴더명을 **슬롯(slots)**이라 한다.<br/>

병렬 라우팅에 대한 slots 및 page.js가 생성되었다면, 이 병렬 라우팅을 렌더링 시켜야된다.<br/>
slots들은 **부모의 `layout.js`에 접근이 가능**하다.<br/>
즉, `info`와 `content`의 부모인 app영역의 layout.js에서 사용할 수 있다는 것이다.<br/>

```js
export default function RootLayout({ children, info, content }) {}
```

layout.js 코드를 보면 props영역에 직접적인 slots명을 작성하면 병렬 라우팅으로 선언된 slots들의 page.js를 호출한다.<br/>

---

**실행 후 0초**<br/>
![image](https://github.com/JJamVa/JJamVa/assets/80045006/fe9ba86b-62af-4105-af1e-a61908fb9699)

**실행 후 1초 뒤**<br/>
![image](https://github.com/JJamVa/JJamVa/assets/80045006/70a2c814-2c6b-4876-8b0f-e7e0eb8e54bc)

**실행 후 5초 뒤**<br/>
![image](https://github.com/JJamVa/JJamVa/assets/80045006/ba44c54f-c3ef-4910-8874-22f4cd033745)

결과 이미지를 보면 병렬 라우팅을 처리하게 되면 위와 같이 독립적인 로드 및 렌더링이 된다.<br/>
즉, 병렬 라우팅은 서로 독립적인 데이터를 로드해야할 경우에 유용하다.<br/>

:::

## Intercepting Routes(가로채는 라우트)

- 특정 라우트의 접근을 조건에 따라 제어하거나 변경할 수 있는 라우팅 기법
- 주로 사용자 인증, 접근 권한 검사, 데이터 미리 로드 등의 목적에 사용
