"use strict";(self.webpackChunktil=self.webpackChunktil||[]).push([[4893],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>k});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=u(n),d=a,k=m["".concat(l,".").concat(d)]||m[d]||c[d]||o;return n?r.createElement(k,i(i({ref:t},p),{},{components:n})):r.createElement(k,i({ref:t},p))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[m]="string"==typeof e?e:a,i[1]=s;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4003:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var r=n(7462),a=(n(7294),n(3905));const o={},i="React Query",s={unversionedId:"frontend/React/ReactQuery",id:"frontend/React/ReactQuery",title:"React Query",description:"React Query\ub780?",source:"@site/docs/frontend/9-React/24-ReactQuery.md",sourceDirName:"frontend/9-React",slug:"/frontend/React/ReactQuery",permalink:"/FE-TIL-JJamVa/docs/frontend/React/ReactQuery",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/frontend/9-React/24-ReactQuery.md",tags:[],version:"current",sidebarPosition:24,frontMatter:{},sidebar:"frontend",previous:{title:"Recoil",permalink:"/FE-TIL-JJamVa/docs/frontend/React/Recoil"},next:{title:"React Hook Form",permalink:"/FE-TIL-JJamVa/docs/frontend/React/ReactHookForm"}},l={},u=[{value:"React Query\ub780?",id:"react-query\ub780",level:2},{value:"React Query \ucd08\uae30 \uc124\uc815",id:"react-query-\ucd08\uae30-\uc124\uc815",level:2},{value:"useQuery",id:"usequery",level:2},{value:"useQueries",id:"usequeries",level:2},{value:"useMutation",id:"usemutation",level:2},{value:"QueryCache",id:"querycache",level:2},{value:"\ub3d9\uc801 Query key",id:"\ub3d9\uc801-query-key",level:2},{value:"React Query\uc758 Suspense\ubaa8\ub4dc",id:"react-query\uc758-suspense\ubaa8\ub4dc",level:2},{value:"useInfiniteQuery(\ubb34\ud55c \uc2a4\ud06c\ub864)",id:"useinfinitequery\ubb34\ud55c-\uc2a4\ud06c\ub864",level:2}],p={toc:u},m="wrapper";function c(e){let{components:t,...n}=e;return(0,a.kt)(m,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"react-query"},"React Query"),(0,a.kt)("h2",{id:"react-query\ub780"},"React Query\ub780?"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ub370\uc774\ud130\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uace0 \ucc98\ub9ac\ud558\uae30 \uc704\ud55c \ub77c\uc774\ube0c\ub7ec\ub9ac"),(0,a.kt)("li",{parentName:"ul"},"\uc11c\ubc84 \uc0c1\ud0dc \ubc0f \uce90\uc2dc\ub97c \uad00\ub9ac\ud558\uace0, API \ud638\ucd9c\uacfc \uac19\uc740 ",(0,a.kt)("strong",{parentName:"li"},"\ube44\ub3d9\uae30 \uc791\uc5c5\uc744 \ub2e8\uc21c\ud654")," \uc791\uc5c5"),(0,a.kt)("li",{parentName:"ul"},"\ud574\ub2f9 React \ud504\ub85c\uc81d\ud2b8 \uacbd\ub85c \ud130\ubbf8\ub110\uc5d0 ",(0,a.kt)("inlineCode",{parentName:"li"},"npm install @tanstack/react-query")," \uc785\ub825\ud558\uc5ec \uc124\uce58")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"react-query V4\uc774\ud558\ub97c \uc0ac\uc6a9\ud560 \uacbd\uc6b0, ",(0,a.kt)("inlineCode",{parentName:"p"},"npm install react-query"),"\ub97c \uc124\uce58")),(0,a.kt)("h2",{id:"react-query-\ucd08\uae30-\uc124\uc815"},"React Query \ucd08\uae30 \uc124\uc815"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},'import React from "react";\nimport { createRoot } from "react-dom/client";\nimport App from "./App";\nimport { QueryClient, QueryClientProvider } from "@tanstack/react-query";\n\nconst queryClient = new QueryClient();\n\nconst container = document.getElementById("root");\nconst root = createRoot(container);\nroot.render(\n  <QueryClientProvider client={queryClient}>\n    <App />\n  </QueryClientProvider>\n);\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"queryClient")," \ubcc0\uc218\ub294 QueryClient\uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud558\uc5ec React Query\uc758 \uc0c1\ud0dc\uc640 \uad00\ub828 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \uc0dd\uc131",(0,a.kt)("br",null),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"<QueryClientProvider client={queryClient}>"),"\ub97c \ud1b5\ud574 React Query\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uac8c \ucd5c\uc0c1\uc704 Component\ub97c \uac10\uc2f8\uc900\ub2e4.")),(0,a.kt)("h2",{id:"usequery"},"useQuery"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ub370\uc774\ud130\ub97c \uac00\uc838\uc624\ub294 \ube44\ub3d9\uae30 \uc791\uc5c5(GET\ubc29\uc2dd)\uc744 \uad00\ub9ac\ud558\ub294 \ub370 \uc0ac\uc6a9"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"useQuery({queryKey: \ucffc\ub9ac \ud0a4, queryFn: \ube44\ub3d9\uae30 \ud568\uc218, Query \ucd94\uac00 \uc635\uc158})"),"\uc758 \ud615\ud0dc\ub85c \uc0ac\uc6a9")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="\ube44\ub3d9\uae30 \ud568\uc218"',title:'"\ube44\ub3d9\uae30','\ud568\uc218"':!0},'import axios from "axios";\n\nconst fetchData = async () => {\n  const { data } = await axios.get(\n    "https://jsonplaceholder.typicode.com/todos/1"\n  );\n  return data;\n};\n\nexport default fetchData;\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="App.js"',title:'"App.js"'},'import { useQuery } from "@tanstack/react-query";\nimport fetchData from "./Async";\n\nfunction App() {\n  const { data, isLoading, error } = useQuery({\n    queryKey: ["todos"],\n    queryFn: fetchData,\n  });\n\n  if (isLoading) {\n    return <>\ub85c\ub529 \uc911</>;\n  }\n\n  if (error) {\n    return <>\uc5d0\ub7ec \ubc1c\uc0dd!!</>;\n  }\n\n  return (\n    <>\n      <h1>\uc81c\ubaa9: {data.title}</h1>\n    </>\n  );\n}\nexport default App;\n')),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://github.com/JJamVa/JJamVa/assets/80045006/a90598d1-32ad-4351-bfef-e785801f79fa",alt:"image"})),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"useQuery\uc5d0 key\uc640 fetchData\ube44\ub3d9\uae30 \ud568\uc218\ub97c \uac1d\uccb4 \ud615\ud0dc\ub85c \ub2f4\uc544 query\ub97c \uc2e4\ud589.",(0,a.kt)("br",null),"\n\uad6c\uc870 \ubd84\ud574 \ud560\ub2f9\uc73c\ub85c ",(0,a.kt)("inlineCode",{parentName:"p"},"{data, isLoading, error}"),"\ub85c useQuery\uc758 \ubc18\ud658 \uac12\uc744 \ubcc0\uc218 \uc0dd\uc131",(0,a.kt)("br",null)),(0,a.kt)("hr",{parentName:"admonition"}),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"data"),": \ube44\ub3d9\uae30 \ud1b5\uc2e0\uc5d0 \ub300\ud55c \uacb0\uacfc\uac12"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"isLoading"),": \ube44\ub3d9\uae30 \ud568\uc218\uac00 pending \uc0c1\ud0dc\uc77c \uacbd\uc6b0"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"error"),": \ube44\ub3d9\uae30 \ud568\uc218\uac00 \uc2e4\ud328\ud588\uc744 \uacbd\uc6b0"))),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"useQuery\uc758 \ud568\uc218 \uc635\uc158")),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let {useQuery \uacb0\uacfc\uac12\uc5d0 \ub300\ud55c \uc18d\uc131} = useQuery({\n    queryKey,\n    queryFn,\n    gcTime\n    ...\n})\n")),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"\ud575\uc2ec \uc635\uc158",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"queryKey"),": Query\ub97c \uc2dd\ubcc4\ud558\ub294 \ub370 \uc0ac\uc6a9\ub418\ub294 \ud0a4. \uce90\uc2dc\uc5d0\uc11c \ub370\uc774\ud130\ub97c \ucc3e\uc744 \ub54c \uc0ac\uc6a9"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"queryFn"),": \ub370\uc774\ud130\ub97c \uac00\uc838\uc624\ub294 \ube44\ub3d9\uae30 \ud568\uc218"),(0,a.kt)("li",{parentName:"ul"},"gcTime: \uac00\ube44\uc9c0 \uceec\ub809\uc158\uc744 \uc704\ud55c \uc2dc\uac04 \uac04\uaca9 \uc870\uc815. \uae30\ubcf8\uac12\uc740 5\ubd84(1000 ","*"," 60 ","*"," 5)"),(0,a.kt)("li",{parentName:"ul"},"staleTime: \ub370\uc774\ud130\uac00 \ub9cc\ub8cc\ub418\uc5b4 \ub2e4\uc2dc \uc870\ud68c\ub418\uae30 \uc804\uae4c\uc9c0\uc758 \uc2dc\uac04\uc744 \uc124\uc815"),(0,a.kt)("li",{parentName:"ul"},"enabled: \uac12\uc774 true\uc77c \uacbd\uc6b0 \ub3d9\uae30\uc801\uc778 \ud568\uc218\ub85c \uc2e4\ud589")))),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("a",{parentName:"p",href:"https://tanstack.com/query/latest/docs/framework/react/reference/useQuery"},"useQuery \uc18d\uc131 \ubc0f \uc635\uc158 \ubb38\uc11c"))),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"gcTime\uacfc staleTime")),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"gcTime(Garbage Collection Time)")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"cacheTime\uc774\ub77c\uace0\ub3c4 \ubd80\ub984"),(0,a.kt)("li",{parentName:"ul"},"\uce90\uc2dc\uc5d0\uc11c \uc0ac\uc6a9\ub418\uc9c0 \uc54a\ub294(\ud574\ub2f9 Query unMount, inactive) Query \ub370\uc774\ud130\uac00 \uba54\ubaa8\ub9ac\uc5d0\uc11c \uc81c\uac70\ub420 \ub54c \uae4c\uc9c0\uc758 \uc2dc\uac04"),(0,a.kt)("li",{parentName:"ul"},"gcTime\uc740 staleTime\uacfc \uad00\uacc4\uc5c6\uc774, \ube44\ud65c\uc131\ud654\ub41c \uc0c1\ud0dc \uae30\uc900\uc73c\ub85c \uce90\uc2dc \ub370\uc774\ud130 \uc0ad\uc81c\ub97c \uacb0\uc815"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"staleTime")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"stale\uc740 ",(0,a.kt)("strong",{parentName:"li"},"\uc624\ub798\ub41c"),"\uc758 \uc758\ubbf8"),(0,a.kt)("li",{parentName:"ul"},"\uc774\uc804 Query\uc758 \uce90\uc2dc\uac00 \uc874\uc7ac\ud558\uc9c0\ub9cc, \uc77c\uc815 \uc2dc\uac04\ub3d9\uc548 \uc5c5\ub370\uc774\ud2b8 \ub418\uc9c0 \uc54a\ub294 \uc2dc\uac04"),(0,a.kt)("li",{parentName:"ul"},"staleTime \ub3d9\uc548\uc758 \ub370\uc774\ud130\ub294 ",(0,a.kt)("inlineCode",{parentName:"li"},"fresh"),"\uc0c1\ud0dc, staleTime\uc774 \ucd08\uacfc\ub420 \uacbd\uc6b0 ",(0,a.kt)("inlineCode",{parentName:"li"},"stale"),"\uc0c1\ud0dc"),(0,a.kt)("li",{parentName:"ul"},"stale\uc0c1\ud0dc\uc77c \uacbd\uc6b0, \ubc31\uadf8\ub77c\uc6b4\ub4dc\uc5d0\uc11c \ub370\uc774\ud130\ub97c \uc0c8\ub85c\uace0\uce68. \uce90\uc2dc\ub41c \ub370\uc774\ud130\ub294 \uc989\uc2dc \ud655\uc778"))))),(0,a.kt)("h2",{id:"usequeries"},"useQueries"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uc5ec\ub7ec \uac1c\uc758 Query\ub97c ",(0,a.kt)("strong",{parentName:"li"},"\ub3d9\uc2dc\uc5d0 \ucc98\ub9ac"),"\ud558\ub294 \ub370 \uc0ac\uc6a9\ub418\ub294 React Query\uc758 \ud568\uc218"),(0,a.kt)("li",{parentName:"ul"},"useQuery\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \uc5ec\ub7ec \uac1c\uc758 Query\ub97c \ubc30\uc5f4\ub85c \ubc1b\uc544 \ucc98\ub9ac")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="\ube44\ub3d9\uae30 \ud568\uc218"',title:'"\ube44\ub3d9\uae30','\ud568\uc218"':!0},'import axios from "axios";\n\nexport const fetchData = async () => {\n  const { data } = await axios.get(\n    "https://jsonplaceholder.typicode.com/todos/1"\n  );\n  return data;\n};\n\nexport const fetchDataUser = async () => {\n  const { data } = await axios.get(\n    "https://jsonplaceholder.typicode.com/users/1"\n  );\n  return data;\n};\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="App.js"',title:'"App.js"'},'import { useQueries } from "@tanstack/react-query";\nimport { fetchData, fetchDataUser } from "./Async";\n\nfunction App() {\n  const queryResult = useQueries({\n    queries: [\n      { queryKey: "todos", queryFn: fetchData },\n      { queryKey: "users", queryFn: fetchDataUser },\n    ],\n  });\n\n  if (queryResult[0].isLoading && queryResult[1].isLoading) {\n    return <>\ub85c\ub529 \uc911</>;\n  }\n\n  if (queryResult[0].error && queryResult[1].error) {\n    return <>\uc5d0\ub7ec \ubc1c\uc0dd!!</>;\n  }\n\n  return (\n    <>\n      <h1>\uc81c\ubaa9: {queryResult[0].data.title}</h1>\n      <h2>\uc720\uc800 \uc774\ub984: {queryResult[1].data.name}</h2>\n    </>\n  );\n}\nexport default App;\n')),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://github.com/JJamVa/JJamVa/assets/80045006/2479796e-6a5a-4c47-b459-851b5bce1eb5",alt:"image"})),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"useQueries \uac19\uc740 \uacbd\uc6b0, \uc5ec\ub7ec\uac1c\uc758 Query\ub97c ",(0,a.kt)("inlineCode",{parentName:"p"},"queries"),"\uc18d\uc131\uc5d0 \ubc30\uc5f4\ub85c \uc815\ubcf4\ub97c \uc800\uc7a5\ud574\uc57c\ub41c\ub2e4.",(0,a.kt)("br",null),"\n\uac01 Query\uc758 data\uc5d0 \uc811\uadfc\ud558\uae30 \uc704\ud574\uc11c \ud574\ub2f9 query\uc758 index\ub85c \uc811\uadfc\ud558\uc5ec \ub370\uc774\ud130\ub97c \ud638\ucd9c\ud558\uba74 \ub41c\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},"\ub9cc\uc57d \ub450\uac1c\uc758 Query \uc911 \ud558\ub098\uac00 \uc2e4\ud328, \ud558\ub098\uac00 \uc131\uacf5\ud560 \uacbd\uc6b0, \uc131\uacf5\ud55c \ub370\uc774\ud130\ub294 \uc815\uc0c1\uc801\uc73c\ub85c \ubc18\ud658\uc774 \ub41c\ub2e4.",(0,a.kt)("br",null),"\nReact Query\uc5d0\uc11c \ubaa8\ub4e0 Query\uac00 \ub3c5\ub9bd\uc801\uc73c\ub85c \ucc98\ub9ac\ub418\uae30 \ub54c\ubb38\uc5d0 \uc11c\ub85c\uc5d0\uac8c \uc601\ud5a5\uc744 \ub07c\uce58\uc9c0 \uc54a\ub294\ub2e4.",(0,a.kt)("br",null))),(0,a.kt)("h2",{id:"usemutation"},"useMutation"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ub370\uc774\ud130\uc758 \uc0dd\uc131(CREATE), \uc218\uc815(UPDATE), \uc0ad\uc81c(DELETE)\uc640 \uac19\uc740 \ubcc0\uacbd \uc791\uc5c5\uc744 \ucc98\ub9ac\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9"),(0,a.kt)("li",{parentName:"ul"},"API \ud638\ucd9c\uacfc \uac19\uc740 \ube44\ub3d9\uae30 \uc791\uc5c5\uc5d0 \uc0ac\uc6a9, \uc791\uc5c5\uc774 \uc131\uacf5\ud558\uba74 \ub370\uc774\ud130\ub97c \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328\ud558\uba74 \uc5d0\ub7ec\ub97c \ucc98\ub9ac"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"useMutation({mutationFn: \ube44\ub3d9\uae30 \ud568\uc218, \ucd94\uac00 \uc635\uc158})"),"\uc758 \ud615\ud0dc\ub85c \uc0ac\uc6a9")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="\ube44\ub3d9\uae30 \ud568\uc218(post)"',title:'"\ube44\ub3d9\uae30','\ud568\uc218(post)"':!0},'import axios from "axios";\n\nconst createPost = async (newPost) => {\n  try {\n    const response = await axios.post(\n      "https://jsonplaceholder.typicode.com/posts",\n      newPost\n    );\n    return response.data;\n  } catch (error) {\n    throw new Error("Failed to create post");\n  }\n};\n\nexport default createPost;\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="App.js"',title:'"App.js"'},'import React from "react";\nimport { useMutation } from "@tanstack/react-query";\nimport createPost from "./Async";\n\nconst App = () => {\n  const mutation = useMutation({\n    mutationFn: createPost,\n    onMutate: (data) => {\n      console.log("onMutate", data);\n    },\n    onError: (error, variable, context) => {\n      console.log("onError", error, variable, context);\n    },\n    onSuccess: (data, variables, context) => {\n      // data: \uc11c\ubc84\ub85c\ubd80\ud130 \ubc18\ud658\ubc1b\uc740 \uc0c8\ub85c \uc0dd\uc131\ub41c \ud3ec\uc2a4\ud2b8 \ub370\uc774\ud130\n      // variables: createPost \ud568\uc218\uc5d0 \uc804\ub2ec\ub41c \uc778\uc790, \uc989 \uc0dd\uc131\ud558\ub824\ub294 \ud3ec\uc2a4\ud2b8 \ub370\uc774\ud130\n      // context : \ubba4\ud14c\uc774\uc158\uc758 \uc0dd\uba85\uc8fc\uae30 \ub3d9\uc548 \ud2b9\uc815 \uc0c1\ud0dc\ub97c \uc804\ub2ec\ud558\uac70\ub098, mutation\uc774 \ud2b8\ub9ac\uac70\ub418\uae30 \uc804\uc758 \uc0c1\ud0dc\n      console.log("onSuccess", data, variables, context);\n    },\n    onSettled: () => {\n      console.log("onSettled");\n    },\n  });\n\n  const handleCreatePost = async () => {\n    const newPost = {\n      title: "New Post",\n      body: "This is the body of the new post.",\n      userId: 1,\n    };\n\n    mutation.mutate(newPost);\n  };\n\n  return (\n    <div>\n      <button onClick={handleCreatePost} disabled={mutation.isLoading}>\n        Create Post\n      </button>\n      {mutation.isLoading && <p>Creating...</p>}\n      {mutation.isError && <p>Error: {mutation.error.message}</p>}\n    </div>\n  );\n};\n\nexport default App;\n')),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://github.com/JJamVa/JJamVa/assets/80045006/8c59c095-d40f-4d16-a48a-8592c687e935",alt:"image"})),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"useMutation\uc744 \uc774\uc6a9\ud558\uc5ec \ube44\ub3d9\uae30 \ud568\uc218(post)\uc758 \uacb0\uacfc\ub97c \ubcf4\uc5ec\uc8fc\ub294 \ucf54\ub4dc\uc774\ub2e4.",(0,a.kt)("br",null),"\n\ubc84\ud2bc\uc744 \ud074\ub9ad \uc2dc, hanldeCreatePost\ud568\uc218\uac00 \uc2e4\ud589\uc774 \ub418\uba70 \ub0b4\ubd80\uc5d0\uc11c useMutation\uc758 mutate\uba54\uc18c\ub4dc\uac00 Argument\uac12\uacfc \ud568\uaed8 \uc2e4\ud589\uc774 \ub41c\ub2e4.",(0,a.kt)("br",null),"\n\uc774\ub97c \ud1b5\ud574, createPost \ube44\ub3d9\uae30 \ud568\uc218\uc5d0\uac8c \uac12\uc774 \uc804\ub2ec\ub418\uba70 \uc2e4\ud589\uc774 \ub418\uc5b4, mutation\uc758 \uacb0\uacfc \uac12\uc774 \uc5b4\ub5bb\uac8c \ubc18\ud658\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"useMutation()\uc758 \ucd94\uac00 \uc635\uc158")),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"onMutate: mutation\uc774 \ud2b8\ub9ac\uac70\uac00 \ub418\uae30 \uc9c1\uc804\uc5d0 \ud638\ucd9c",(0,a.kt)("br",null)),(0,a.kt)("li",{parentName:"ul"},"onSuccess: \ube44\ub3d9\uae30 \ud568\uc218\uc758 \ucc98\ub9ac\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc218\ud589\ud588\uc744 \uacbd\uc6b0",(0,a.kt)("br",null)),(0,a.kt)("li",{parentName:"ul"},"onError: \ube44\ub3d9\uae30 \ud568\uc218\uc758 \ucc98\ub9ac\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ub418\uc9c0\uc54a\uc744 \uacbd\uc6b0",(0,a.kt)("br",null)),(0,a.kt)("li",{parentName:"ul"},"onSettled: \ube44\ub3d9\uae30 \ud568\uc218\uc758 \uc131\uacf5/\uc2e4\ud328\uc640 \uc0c1\uad00\uc5c6\uc774 \uc644\ub8cc\ub418\uba74 \uc2e4\ud589",(0,a.kt)("br",null))),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("a",{parentName:"p",href:"https://tanstack.com/query/latest/docs/framework/react/reference/useMutation"},"useMutation \uc18d\uc131 \ubc0f \uc635\uc158 \ubb38\uc11c"))),(0,a.kt)("h2",{id:"querycache"},"QueryCache"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Query \uacb0\uacfc\ub97c \uc800\uc7a5\ud558\uace0 \uad00\ub9ac\ud558\ub294 \uc5ed\ud560"),(0,a.kt)("li",{parentName:"ul"},"\ub2e4\uc591\ud55c \uc124\uc815\uc744 \ud1b5\ud574 \ub3d9\uc791\uc744 \uc870\uc808\ud558\uace0, \ucffc\ub9ac\uc758 \ub370\uc774\ud130\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uad00\ub9ac")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="QueryCache \ucf54\ub4dc"',title:'"QueryCache','\ucf54\ub4dc"':!0},'import React from "react";\nimport { createRoot } from "react-dom/client";\nimport App from "./App";\nimport {\n  QueryCache,\n  QueryClient,\n  QueryClientProvider,\n} from "@tanstack/react-query";\n\nconst queryClient = new QueryClient({\n  queryCache: new QueryCache({\n    onError: (error, query) => {\n      console.log("\uc5d0\ub7ec \ucd9c\ub825", error, query);\n    },\n    onSuccess: (data) => {\n      console.log("\uc131\uacf5 \ucd9c\ub825", data);\n    },\n  }),\n});\n\nconst container = document.getElementById("root");\nconst root = createRoot(container);\nroot.render(\n  <QueryClientProvider client={queryClient}>\n    <App />\n  </QueryClientProvider>\n);\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="\ube44\ub3d9\uae30 \ud568\uc218"',title:'"\ube44\ub3d9\uae30','\ud568\uc218"':!0},'import axios from "axios";\n\nexport const fetchData = async () => {\n  const { data } = await axios.get(\n    "https://jsonplaceholder.typicode.com/todos/1"\n  );\n  return data;\n};\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="App.js"',title:'"App.js"'},'import { useQuery } from "@tanstack/react-query";\nimport { fetchData } from "./Async";\n\nfunction App() {\n  const queryResult = useQuery({ queryKey: ["todos"], queryFn: fetchData });\n\n  if (queryResult.isLoading) {\n    return <>\ub85c\ub529 \uc911</>;\n  }\n\n  if (queryResult.error) {\n    return <>\uc5d0\ub7ec \ubc1c\uc0dd!!</>;\n  }\n\n  return (\n    <>\n      <h1>\uc81c\ubaa9: {queryResult.data.title}</h1>\n    </>\n  );\n}\nexport default App;\n')),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://github.com/JJamVa/JJamVa/assets/80045006/e4a4ed38-781e-4e2d-99f4-cc0b93a2dc2d",alt:"image"})),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"QueryCache\uc640 \uac19\uc740 \uacbd\uc6b0, \ucd08\uae30 Query\uc758 \uc601\uc5ed\uc744 \uc9c0\uc815\ud560 \ub54c \ud568\uaed8 \uc0ac\uc6a9\ud558\ub294 \ud568\uc218\uc774\ub2e4.",(0,a.kt)("br",null),"\nQuery\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc2e4\ud589\ub420 \uacbd\uc6b0 QueryCache\uc548 onSuccess \uc18d\uc131\uc774 \uc2e4\ud589\uc774 \ub418\uba70, \uc2e4\ud328\ud560 \uacbd\uc6b0, onError \uc18d\uc131\uc774 \uc2e4\ud589\ub41c\ub2e4.",(0,a.kt)("br",null),"\nQueryCache\ub294 Query\ub4e4\uc774 ",(0,a.kt)("strong",{parentName:"p"},"\uc804\uc5ed\uc801\uc73c\ub85c \uc2e4\ud589 \uacb0\uacfc\uc5d0 \ub300\ud55c \ud655\uc778 \ubc0f \uad00\ub9ac"),"\ud558\ub294 React Query\uc758 \uac1d\uccb4\uc774\ub2e4.",(0,a.kt)("br",null))),(0,a.kt)("h2",{id:"\ub3d9\uc801-query-key"},"\ub3d9\uc801 Query key"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Query \ub3d9\uc791\uacfc\uc815\uc740 \uc77c\uce58\ud558\ub098 \uac1c\ubcc4\ub85c \uad00\ub9ac\ud574\uc57c\ud560 \uacbd\uc6b0 \uc0ac\uc6a9"),(0,a.kt)("li",{parentName:"ul"},"\ud3b8\ub9ac\ud55c \uc720\uc9c0\ubcf4\uc218 \ubc0f \uac00\ub3c5\uc131\uc744 \uc704\ud574 \uc0ac\uc6a9")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="\ube44\ub3d9\uae30 \ud568\uc218"',title:'"\ube44\ub3d9\uae30','\ud568\uc218"':!0},'import axios from "axios";\n\nconst fetchUsers = async (page, pageSize) => {\n  const response = await axios.get(\n    `https://jsonplaceholder.typicode.com/users`,\n    {\n      params: {\n        _page: page,\n        _limit: pageSize,\n      },\n    }\n  );\n  return response.data;\n};\n\nexport default fetchUsers;\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="App.js"',title:'"App.js"'},'import { useQuery } from "@tanstack/react-query";\nimport React, { useState } from "react";\nimport fetchUsers from "./Async";\n\nconst App = () => {\n  const [page, setPage] = useState(1);\n  const pageSize = 2;\n\n  function decrease() {\n    if (page > 1) setPage(page - 1);\n  }\n\n  function increase() {\n    if (page < 5) setPage(page + 1);\n  }\n\n  const {\n    data: users,\n    isLoading,\n    isError,\n  } = useQuery({\n    queryKey: ["users", page, pageSize],\n    queryFn: () => fetchUsers(page, pageSize),\n  });\n\n  if (isLoading) {\n    return <div>\ub85c\ub529 \uc911</div>;\n  }\n\n  if (isError) {\n    return <div>\uc5d0\ub7ec \ubc1c\uc0dd</div>;\n  }\n\n  return (\n    <div>\n      <h1>Users List</h1>\n      <ul>\n        {users.map((user) => (\n          <li key={user.id}>{user.name}</li>\n        ))}\n      </ul>\n      <button onClick={decrease}>\uc774\uc804</button>\n      <button onClick={increase}>\ub2e4\uc74c</button>\n    </div>\n  );\n};\n\nexport default App;\n')),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://github.com/JJamVa/JJamVa/assets/80045006/3055d024-786a-42fa-8658-046624219805",alt:"image"})),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"\uc704\uc758 \ucf54\ub4dc\ub294 Query\uc758 key\uac12\uc774 \ub3d9\uc801\uc778 \uacbd\uc6b0\uc5d0 \ub300\ud55c \uc608\uc2dc \ucf54\ub4dc\uc774\ub2e4.",(0,a.kt)("br",null),"\npage\uc640 pageSize\ub97c \uc778\uc790\ub85c \ubc1b\uc544, \ud398\uc774\uc9c0\uc5d0 \ud574\ub2f9\ud558\ub294 \uc0ac\uc6a9\uc790 \ubaa9\ub85d\uc744 \uac00\uc838\uc628\ub2e4.",(0,a.kt)("br",null),"\npage\ud639\uc740 pageSize\uac12\uc774 \ubcc0\ud560 \ub54c\ub9c8\ub2e4, \uc0c8\ub85c\uc6b4 Query\uac00 \uc0dd\uc131\uc774 \ub418\uba70 \ub3c5\ub9bd\uc801\uc73c\ub85c \uce90\uc2dc \uad00\ub9ac\ub97c \ud55c\ub2e4.",(0,a.kt)("br",null),"\n\uc989, key\uac12\uc774 \ub3d9\uc801\uc77c \uacbd\uc6b0\uc5d0 \uac19\uc740 \uae30\ub2a5\uc758 \ube44\ub3d9\uae30 \ud568\uc218\ub97c \uc0ac\uc6a9\ud558\ub354\ub77c\ub3c4 ",(0,a.kt)("strong",{parentName:"p"},"\uac1c\ubcc4\uc758 Query\ub97c \uad00\ub9ac")," \ud560 \uc218 \uc788\uc73c\uba70,",(0,a.kt)("br",null),"\n\ud544\uc694\uc5d0 \ub530\ub77c \ud2b9\uc815 \ud398\uc774\uc9c0\uc758 Query\uc5d0 \ub300\ud55c \ubd80\uac00\uc801\uc778 \ub3d9\uc791(\uc5c5\ub370\uc774\ud2b8, \ud328\uce58 \ub4f1)\uc744 \uad6c\ud604 \ud560 \uc218 \uc788\ub2e4.",(0,a.kt)("br",null))),(0,a.kt)("h2",{id:"react-query\uc758-suspense\ubaa8\ub4dc"},"React Query\uc758 Suspense\ubaa8\ub4dc"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ub370\uc774\ud130 \ub85c\ub529\uc744 \uc804\uc5ed\uc801\uc73c\ub85c \uac04\ub2e8\ud558\uac8c \ucc98\ub9ac"),(0,a.kt)("li",{parentName:"ul"},"React\uc5d0\uc11c \ube44\ub3d9\uae30 \ub370\uc774\ud130 \ub85c\ub529 \ud654\uba74\uc744 \ub354 \uc27d\uac8c \ub2e4\ub8e8\ub3c4\ub85d \ud574\uc8fc\ub294 \uae30\ub2a5")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"\uc120\ud0dd\uc801 Query Suspense"),(0,a.kt)("div",{markdown:"1"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="index.js"',title:'"index.js"'},'import React from "react";\nimport { createRoot } from "react-dom/client";\nimport App from "./App";\nimport { QueryClient, QueryClientProvider } from "@tanstack/react-query";\n\nconst queryClient = new QueryClient();\n\nconst container = document.getElementById("root");\nconst root = createRoot(container);\nroot.render(\n  <QueryClientProvider client={queryClient}>\n    <React.Suspense fallback={<div>Loading...</div>}>\n      <App />\n    </React.Suspense>\n  </QueryClientProvider>\n);\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="\ube44\ub3d9\uae30 \ud568\uc218"',title:'"\ube44\ub3d9\uae30','\ud568\uc218"':!0},'import axios from "axios";\n\nconst fetchPosts = async () => {\n  const response = await axios.get(\n    "https://jsonplaceholder.typicode.com/posts"\n  );\n  return response.data;\n};\n\nexport default fetchPosts;\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="\uc120\ud0dd\uc801 suspense \ucf54\ub4dc"',title:'"\uc120\ud0dd\uc801',suspense:!0,'\ucf54\ub4dc"':!0},'import React from "react";\nimport { useQuery } from "@tanstack/react-query";\nimport fetchPosts from "./Async";\n\nconst App = () => {\n  const { data, isError, error } = useQuery({\n    queryKey: ["posts"],\n    queryFn: fetchPosts,\n    suspense: true,\n  });\n\n  if (isError) {\n    return <p>Error: {error.message}</p>;\n  }\n\n  return (\n    <div>\n      <h1>Post List</h1>\n      <ul>\n        {data.map((post) => (\n          <li key={post.id}>{post.title}</li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default App;\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"\uc704\uc758 index.js \ucf54\ub4dc\uc5d0\uc11c Suspense\ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 \uc124\uc815\uc744 \ud574\uc57c\ub41c\ub2e4.",(0,a.kt)("br",null),"\nSuspense\ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 ",(0,a.kt)("strong",{parentName:"p"},"Suspense\ub97c \uc0ac\uc6a9\ud560 Component\ubcf4\ub2e4 \uc0c1\uc704\uc5d0 \uc874\uc7ac"),"\ud574\uc57c\ud55c\ub2e4.",(0,a.kt)("br",null),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"<React.Suspense fallback={<Loading\uc5d0 \ud45c\ud604\ud560 Component/>}"),"\ub97c \ucd5c\uc0c1\uc704 Component\ub85c \uc124\uc815\uc744 \ud558\uba74 Suspense \uc0ac\uc6a9 \uac00\ub2a5",(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},"Suspense\ub97c \uc0ac\uc6a9\ud560 Query\uc758 \uc18d\uc131\uc5d0 ",(0,a.kt)("inlineCode",{parentName:"p"},"{suspense:true}"),"\uc744 \ucd94\uac00\ub85c \uc791\uc131\ud558\uba74 \ub41c\ub2e4.",(0,a.kt)("br",null),"\n\uadf8\ub7fc Suspense\ub97c \ub4f1\ub85d\ud55c Query\uac00 \ube44\ub3d9\uae30 \ud1b5\uc2e0 \uc9c4\ud589 \uc0c1\ud0dc(Pending)\uc77c \uacbd\uc6b0,",(0,a.kt)("br",null),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"<React.Suspense>"),"\uc18d\uc131\uc758 ",(0,a.kt)("strong",{parentName:"p"},"fallback\uc18d\uc131\uc5d0 \ud45c\ud604\ud560 Component \ud654\uba74\uc774 \ucd9c\ub825"),"\ub41c\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},"\uc774\ub97c \ud1b5\ud574 \uacf5\ud1b5\uc73c\ub85c \ub85c\ub529 \ud654\uba74\uc744 \ud45c\ud604\ud560 Query\uc5d0 \uc0ac\uc6a9 \uac00\ub2a5\ud558\ub2e4.",(0,a.kt)("br",null))))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"\ubaa8\ub4e0 Query Suspense"),(0,a.kt)("div",{markdown:"1"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="index.js"',title:'"index.js"'},'import React from "react";\nimport { createRoot } from "react-dom/client";\nimport App from "./App";\nimport { QueryClient, QueryClientProvider } from "@tanstack/react-query";\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      suspense: true,\n    },\n  },\n});\n\nconst container = document.getElementById("root");\nconst root = createRoot(container);\nroot.render(\n  <QueryClientProvider client={queryClient}>\n    <React.Suspense fallback={<div>Loading...</div>}>\n      <App />\n    </React.Suspense>\n  </QueryClientProvider>\n);\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="\ube44\ub3d9\uae30 \ud568\uc218"',title:'"\ube44\ub3d9\uae30','\ud568\uc218"':!0},'import axios from "axios";\n\nconst fetchPosts = async () => {\n  const response = await axios.get(\n    "https://jsonplaceholder.typicode.com/posts"\n  );\n  return response.data;\n};\n\nexport default fetchPosts;\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="App.js"',title:'"App.js"'},'import React from "react";\nimport { useQuery } from "@tanstack/react-query";\nimport fetchPosts from "./Async";\n\nconst App = () => {\n  const { data, isError, error } = useQuery({\n    queryKey: ["posts"],\n    queryFn: fetchPosts,\n  });\n\n  if (isError) {\n    return <p>Error: {error.message}</p>;\n  }\n\n  return (\n    <div>\n      <h1>Post List</h1>\n      <ul>\n        {data.map((post) => (\n          <li key={post.id}>{post.title}</li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default App;\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Suspense\ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95 \uc911 \ub2e4\ub978 \ubc29\ubc95\uc774\ub2e4.",(0,a.kt)("br",null),"\n\uc704\uc758 \ucf54\ub4dc\uc640 \uac19\uc740 \uacbd\uc6b0 \uac1c\ubcc4\uc801\uc73c\ub85c Query\uc5d0 \ub300\ud574 \uc635\uc158\uc744 \ubd80\uc5ec\ud558\uc9c0 \uc54a\uace0,",(0,a.kt)("br",null),"\nQueryClient\uc758 \uc635\uc158\uc744 \ud1b5\ud574 ",(0,a.kt)("strong",{parentName:"p"},"\uc0ac\uc6a9\ud558\ub294 \ubaa8\ub4e0 Query\uc5d0 \ub300\ud574 Suspense\ub97c \uc635\uc158\uc744 \ubd80\uc5ec"),"\ud558\ub294 \ubc29\ubc95\uc774\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},"\uc0ac\uc6a9\ubc95\uc740 \ucd5c\uc0c1\uc704 Component\uc5d0 \uc811\uadfc\ud558\uc5ec QueryClient\uc5d0\uac8c \uc635\uc158\uc744 \ubd80\uc5ec\ud558\uba74 \ub41c\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      suspense: true,\n    },\n  },\n});\n")),(0,a.kt)("p",{parentName:"admonition"},"\uc774\ub97c \ud1b5\ud574, \uc0ac\uc6a9\ud560 \ubaa8\ub4e0 Query\ub4e4\uc5d0\uac8c Suspense\ub97c \ubd80\uc5ec\ud55c\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\ubaa8\ub4e0 Query\uac00 \ub611\uac19\uc740 \ub85c\ub529\ud654\uba74\uc744 \uc81c\uacf5\ud560 \uacbd\uc6b0 \ub9e4\uc6b0 \ud3b8\ub9ac\ud558\ub2e4."))))),(0,a.kt)("h2",{id:"useinfinitequery\ubb34\ud55c-\uc2a4\ud06c\ub864"},"useInfiniteQuery(\ubb34\ud55c \uc2a4\ud06c\ub864)"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\ubb34\ud55c \uc2a4\ud06c\ub864")," \ud639\uc740 ",(0,a.kt)("strong",{parentName:"li"},"\ud398\uc774\uc9c0 \ub124\uc774\uc158"),"\uc744 \uad6c\ud604\ud560 \ub54c \uc0ac\uc6a9"),(0,a.kt)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790\uac00 \uc2e4\uc81c\ub85c \ud544\uc694\ub85c \ud558\ub294 \ub370\uc774\ud130\ub9cc \uc810\uc9c4\uc801\uc73c\ub85c \ubd88\ub7ec\uc640 \uc131\ub2a5 \uac1c\uc120")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\ubb34\ud55c \uc2a4\ud06c\ub864\uc5d0 \uc0ac\uc6a9 \uc2dc, \uace0\ub824 \uc0ac\ud56d"),(0,a.kt)("br",null),(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},"\uc0ac\uc6a9\uc790\uac00 \uc2a4\ud06c\ub864\ud558\ub294 \uc704\uce58\ub97c \uc2e4\uc2dc\uac04\uc73c\ub85c \uac10\uc9c0\ud558\uace0, \ud398\uc774\uc9c0 \ub05d\uc5d0 \ub3c4\ub2ec\ud588\uc744 \ub54c \ucd94\uac00\uc801\uc778 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc640\uc57c \ud55c\ub2e4.",(0,a.kt)("br",null),"\n\uc774 \uacfc\uc815\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uae30 \uc704\ud574, \uc8fc\ub85c \ub2e4\uc74c \ub450 \uac00\uc9c0 \ubc29\ubc95\uc744 \uc0ac\uc6a9",(0,a.kt)("br",null)),(0,a.kt)("ol",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Intersection Observer API"))),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"\ube0c\ub77c\uc6b0\uc800 \ub0b4\uc7a5 API"),(0,a.kt)("li",{parentName:"ul"},"\ud0c0\uac9f \uc694\uc18c\uac00 \ubdf0\ud3ec\ud2b8(\ud654\uba74\uc5d0 \ubcf4\uc774\ub294 \uc601\uc5ed)\uc5d0 \ub4e4\uc5b4\uc624\ub294\uc9c0 \uc5ec\ubd80\ub97c \ube44\ub3d9\uae30\uc801\uc73c\ub85c \uac10\uc9c0"),(0,a.kt)("li",{parentName:"ul"},"\ub370\uc774\ud130\ub97c \ucd94\uac00\ub85c \ubd88\ub7ec\uc62c \ubc84\ud2bc\uc774\ub098 \ud398\uc774\uc9c0 \ub05d\uc744 \uac10\uc9c0\ud558\ub294 \ub370 \uc720\uc6a9")),(0,a.kt)("ol",{parentName:"admonition",start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"viewport\ub97c \uc774\uc6a9\ud55c \uc2a4\ud06c\ub864 \uc774\ubca4\ud2b8 \ud578\ub4e4\ub9c1"))),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790\uc758 \uc2a4\ud06c\ub864 \uc704\uce58\ub97c \uacc4\uc0b0\ud558\uc5ec \ud2b9\uc815 \uc9c0\uc810\uc5d0\uc11c \ucd94\uac00 \ub370\uc774\ud130\ub97c \uc694\uccad"))),(0,a.kt)("details",null,(0,a.kt)("summary",null,"IntersectionObserver API\ub97c \uc774\uc6a9\ud55c \ubb34\ud55c\uc2a4\ud06c\ub864 \uad6c\ud604"),(0,a.kt)("div",{markdown:"1"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="\ube44\ub3d9\uae30 \ud568\uc218"',title:'"\ube44\ub3d9\uae30','\ud568\uc218"':!0},'import axios from "axios";\n\nconst fetchPosts = async ({ pageParam = 1 }) => {\n  const res = await axios.get(\n    `https://jsonplaceholder.typicode.com/posts?_page=${pageParam}&_limit=10`\n  );\n  return res.data;\n};\n\nexport default fetchPosts;\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="\ubb34\ud55c\uc2a4\ud06c\ub864 \uad6c\ud604"',title:'"\ubb34\ud55c\uc2a4\ud06c\ub864','\uad6c\ud604"':!0},'import React, { useEffect, useRef } from "react";\nimport { useInfiniteQuery } from "@tanstack/react-query";\nimport fetchPosts from "./Async";\n\nconst App = () => {\n  const { data, fetchNextPage, hasNextPage, isFetchingNextPage } =\n    useInfiniteQuery({\n      queryKey: ["infiniteScroll"],\n      queryFn: fetchPosts,\n      getNextPageParam: (lastPage, pages) => pages.length + 1,\n    });\n\n  const observer = useRef();\n\n  useEffect(() => {\n    if (isFetchingNextPage || !hasNextPage) return;\n\n    const observerInstance = new IntersectionObserver((entries) => {\n      if (entries[0].isIntersecting) {\n        fetchNextPage();\n      }\n    });\n\n    if (observer.current) {\n      observerInstance.observe(observer.current);\n    }\n\n    return () => {\n      if (observer.current) {\n        observerInstance.unobserve(observer.current);\n      }\n    };\n  }, [isFetchingNextPage, fetchNextPage, hasNextPage]);\n\n  return (\n    <div style={{ height: "30vh", overflow: "auto" }}>\n      {data?.pages.map((page, pageIndex) => (\n        <React.Fragment key={pageIndex}>\n          {page.map((post, postIndex) => (\n            <p\n              key={post.id}\n              ref={page.length === postIndex + 1 ? observer : null}\n            >\n              {post.title}\n            </p>\n          ))}\n        </React.Fragment>\n      ))}\n    </div>\n  );\n};\n\nexport default App;\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"\uc704\uc758 \ucf54\ub4dc\ub294 useInfiniteQuery\ub97c \uc774\uc6a9\ud574 \uc2a4\ud06c\ub864\uc774 \ucd5c\ud558\ub2e8\uc5d0 \ub0b4\ub824\uac08 \uacbd\uc6b0, \uc0c8\ub85c\uc6b4 \ub370\uc774\ud130\ub97c \ubcf4\uc5ec\uc8fc\ub294 \ucf54\ub4dc\uc774\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"useInfiniteQuery \uc635\uc158")),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"getNextPageParam"),":",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\ubd88\ub7ec\uc628 \ub370\uc774\ud130\uc758 \ub9c8\uc9c0\ub9c9 \ud398\uc774\uc9c0\ub97c \uae30\ubc18\uc73c\ub85c \ub2e4\uc74c \ud398\uc774\uc9c0 \ub370\uc774\ud130\ub97c \uc694\uccad\ud560 \ub54c \ud544\uc694\ud55c \ubcc0\uc218\ub97c \ubc18\ud658"),(0,a.kt)("li",{parentName:"ul"},"\ub2e4\uc74c \ud398\uc774\uc9c0 \ub370\uc774\ud130 \uc694\uccad \uc2dc queryFn\uc5d0 \uc804\ub2ec")))),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"useInfiniteQuery \ubc18\ud658\uac12")),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"fetchNextPage"),": \ub2e4\uc74c \ud398\uc774\uc9c0\uc758 \ub370\uc774\ud130\ub97c \uba85\uc2dc\uc801\uc73c\ub85c \ubd88\ub7ec\uc624\ub294 \ud568\uc218"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"hasNextPage"),": \ub354 \ubd88\ub7ec\uc62c \ud398\uc774\uc9c0\uac00 \uc788\ub294 \ud655\uc778\ud558\ub294 \uac12(boolean). true\uc77c \uacbd\uc6b0 ",(0,a.kt)("inlineCode",{parentName:"li"},"fetchNextPage"),"\ub97c \ud638\ucd9c"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"isFetchingNextPage"),": \ub2e4\uc74c \ud398\uc774\uc9c0\uac00 \ud328\uce6d \uc911\uc778\uc9c0 \ub098\ud0c0\ub0b4\ub294 \uac12(boolean)")),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("a",{parentName:"p",href:"https://tanstack.com/query/latest/docs/framework/react/reference/useInfiniteQuery"},"useInfiniteQuery \uc18d\uc131 \ubc0f \uc635\uc158 \ubb38\uc11c")),(0,a.kt)("hr",{parentName:"admonition"}),(0,a.kt)("p",{parentName:"admonition"},"IntersectionObserver\ub97c \uc774\uc6a9\ud574\uc11c \ubb34\ud55c \uc2a4\ud06c\ub864\uc744 \uad6c\ud604\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc2a4\ud06c\ub864 \uc704\uce58\ub97c \ud655\uc778 \ud574\uc57c\ud55c\ub2e4.",(0,a.kt)("br",null),"\nuseRef\ub97c \uc774\uc6a9\ud574\uc11c \ud638\ucd9c\ub41c \ub370\uc774\ud130\uc758 \ub9c8\uc9c0\ub9c9 \uc694\uc18c\uc5d0 \ub300\ud574 \ucc38\uc870\ud55c\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"const observer = useRef();\n")),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"IntersectionObserver")," \uc778\uc2a4\ud134\uc2a4\ub97c \ud1b5\ud574 \ud398\uc774\uc9c0\uc758 \ub9c8\uc9c0\ub9c9 \uc694\uc18c\uac00 viewport\uc5d0 \ub4e4\uc5b4\uc62c \ub54c \uc2e4\ud589\ub420 \ucf5c\ubc31 \ud568\uc218\ub97c \uc815\uc758\ud55c\ub2e4",(0,a.kt)("br",null),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"entries[0].isIntersecting"),"\ub97c \ud1b5\ud574 viewport\uc640 \uad50\ucc28\ud558\ub294\uc9c0 \ud655\uc778\uc744 \ud55c\ub2e4.",(0,a.kt)("br",null),"\n\uad50\ucc28\uac00 \ud655\uc778\uc774 \ub420 \uacbd\uc6b0, fetchNextPage\ud568\uc218\uac00 \uc2e4\ud589\ub41c\ub2e4.",(0,a.kt)("br",null),"\nfetchNextPage\uac00 \uc2e4\ud589\ub418\uba74 getNextPageParam\ub3c4 \uc2e4\ud589\ub418\uc5b4,",(0,a.kt)("br",null),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"lastPage(\uc774\uc804\uc5d0 \ubd88\ub7ec\uc628 \ud398\uc774\uc9c0 \ub370\uc774\ud130)"),"\uc640 ",(0,a.kt)("inlineCode",{parentName:"p"},"page(\ud604\uc7ac\uae4c\uc9c0 \ubd88\ub7ec\uc628 \ubaa8\ub4e0 \ud398\uc774\uc9c0\uc758 \ubc30\uc5f4)"),"\ub97c \uc778\uc790\ub97c \uc5f0\uc0b0 \ud6c4,\nqueryFn\uc5d0 \uc804\ub2ec\ud574 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub3c4\ub85d \uc694\uccad\ud55c\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"const observerInstance = new IntersectionObserver((entries) => {\n  if (entries[0].isIntersecting) {\n    fetchNextPage();\n  }\n});\n")),(0,a.kt)("p",{parentName:"admonition"},"ref\ub97c \ucc38\uc870\ud55c \uc694\uc18c\ub97c IntersectionObserver\uc758 ",(0,a.kt)("strong",{parentName:"p"},"\uad00\ucc30 \ub300\uc0c1\uc73c\ub85c \uc124\uc815"),"\ud55c\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"if (observer.current) {\n  observerInstance.observe(observer.current);\n}\n")),(0,a.kt)("p",{parentName:"admonition"},"useEffect\uac00 unMount\uac00 \ub420 \uacbd\uc6b0, clean-up\ud568\uc218\ub97c \ud1b5\ud574 ",(0,a.kt)("strong",{parentName:"p"},"\uad00\ucc30 \ub300\uc0c1\uc744 \ud574\uc81c"),"\ud55c\ub2e4.",(0,a.kt)("br",null),"\nComponent\uac00 \uc0ac\ub77c\uc9c4 \ud6c4\uc5d0\ub3c4 ",(0,a.kt)("strong",{parentName:"p"},"\ubd88\ud544\uc694\ud55c \uc791\uc5c5\uc774 \uacc4\uc18d\ub418\ub294 \uac83\uc744 \ubc29\uc9c0"),"\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\ub41c\ub2e4.",(0,a.kt)("br",null)),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"return () => {\n  if (observer.current) {\n    observerInstance.unobserve(observer.current);\n  }\n};\n"))))))}c.isMDXComponent=!0}}]);